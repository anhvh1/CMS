"use strict";(self.webpackChunkbrvh=self.webpackChunkbrvh||[]).push([[508],{74208:function(n,e,i){i.d(e,{E:function(){return r}});var l=i(45133),t=i.n(l),a=i(66660),r=function(n,e){return t()({method:"POST",url:n,data:e,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat((0,a.Y8)())}}).catch((function(n){var e=n.response,i=e.status,l=e.statusText;return{Status:0,Message:i||l?"".concat(i," - ").concat(l):"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra"}}))}},94750:function(n,e,i){i.r(e),i.d(e,{default:function(){return H}});var l,t=i(93433),a=i(1413),r=i(29439),o=i(50390),s=i(80411),d=i(22799),u=i(79758),c=i(32955),g=i(41719),p=i(79588),h=i(90441),f=i(15593),m=i(21834),v=i(93137),x=i(53649),y=i(80543),N=i(91565),I=i(30168),D=i(16932).ZP.div(l||(l=(0,I.Z)(["\n  img {\n    /* Lo\u1ea1i b\u1ecf kh\u1ea3 n\u0103ng ch\u1ecdn khi k\xe9o */\n    user-select: none;\n    /* Lo\u1ea1i b\u1ecf s\u1ef1 ki\u1ec7n chu\u1ed9t khi k\xe9o */\n    /* pointer-events: none; */\n  }\n\n  @keyframes slideAnimation {\n    from {\n      transform: translateX(0);\n    }\n    to {\n      transform: translateX(var(--offset));\n    }\n  }\n\n  * {\n    user-select: none;\n  }\n  .slide-over {\n    position: relative;\n  }\n  .upload-wrap {\n    flex-direction: column;\n    .upload-target {\n      cursor: pointer;\n      margin-top: 20px;\n      font-size: 18px;\n      display: flex;\n      align-items: center;\n      gap: 5px;\n      p {\n        color: #357bd0;\n      }\n    }\n    .image-upload {\n      max-width: 200px;\n    }\n  }\n  .configure-item {\n    .title-configure {\n      font-size: 20px;\n      border-radius: 5px;\n      background: #e6e3e3;\n      padding: 5px 10px;\n      display: inline-block;\n      margin: 20px 0;\n    }\n    .suggest {\n      color: #ff0000;\n    }\n    .upload-wrapper {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n    .plus-icon {\n      font-size: 100px;\n      color: #0085c6;\n    }\n\n    .swiper {\n      margin: 30px 0;\n      min-height: 250px;\n      .swiper-slide {\n        background: #eaeaea;\n        border-radius: 15px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      }\n    }\n  }\n  .custom-div:hover {\n  cursor: grab;\n}\n"]))),j=(i(70785),i(27584)),Z=i(74208),w=i(39281),L=i(34424),S=(i(97548),i(78832),i(62559));v.Z.use([y.W_]);d.Z.Title,u.Z.Dragger;var b={padding:"10px",display:"inline-block",fontWeight:"bold",fontSize:"18px",backgroundColor:"#E6E3E3",maxWidth:"250px",margin:"20px 0"},k={minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",backgroundColor:"#fff",borderRadius:"15px"},C={display:"flex",alignItems:"center",justifyContent:"center",margin:"20px 0"},H=function(){document.title="C\u1ea5u h\xecnh \u0111\u0103ng nh\u1eadp";var n=(0,L.v9)((function(n){return n.CauHinhDangNhap})).CauHinhDangNhap,e=(0,o.useState)({isHold:!1,isClick:!1,uploadAntRef:(0,o.useRef)(),draggedIndex:0,dragLayerRef:(0,o.useRef)(),draggedItemRef:(0,o.useRef)(),visibleDraggLayer:!1,styleDraggLayer:{},draggedItem:null,draggedOverIndex:null,draggedItemOver:null,Logo:null,Background:null,ListSlide:new Array(5).fill({}),TenPhanMem:"",LogoDangNhap:null,HinhNenDangNhap:null,ID:null}),i=(0,r.Z)(e,2),l=i[0],d=i[1],v=(0,L.I0)(),I=l.ListSlide,H=l.isHold,P=l.isClick,T=l.draggedIndex,F=l.dragLayerRef,M=l.draggedItemRef,E=l.styleDraggLayer,R=l.draggedItem,z=l.draggedItemOver,A=l.draggedOverIndex,U=l.TenPhanMem,O=l.LogoDangNhap,W=l.HinhNenDangNhap,q=l.ID;(0,o.useEffect)((function(){v(w.Z.getInfo())}),[]),(0,o.useEffect)((function(){if(n){var e=null===n||void 0===n?void 0:n.reduce((function(n,e){return e.ID>n.ID?e:n}),{ID:0});if(e){var i,l,t,r=null===e||void 0===e||null===(i=e.SlideAnh)||void 0===i?void 0:i.split(";"),o=null===e||void 0===e||null===(l=e.SlideAnhUrl)||void 0===l||null===(t=l.split(";"))||void 0===t?void 0:t.map((function(n,e){return{image:n,imageID:r[e]}}));B((0,a.Z)((0,a.Z)({},e),{},{ListSlide:o,HinhNenDangNhap:{url:e.HinhNenDangNhapURL,Id:e.HinhNenDangNhap?e.HinhNenDangNhap:null},LogoDangNhap:{url:e.LogoDangNhapUrl,Id:e.LogoDangNhap?e.LogoDangNhap:null}}))}}}),[n]),(0,o.useEffect)((function(){var n,e,i=l.draggedItem,t=function(n){if(null!==i&&i.image&&T>=0&&null!==T){var e=null===F||void 0===F?void 0:F.current;e&&(e.style.top="".concat(n.clientY-10,"px"),e.style.left="".concat(n.clientX-50,"px"),e.style.display="flex")}};null===(n=document)||void 0===n||n.addEventListener("mousemove",t);var a=function(n){var e;H&&(null===n||void 0===n||null===(e=n.dataTransfer)||void 0===e||e.setDragImage(img,0,0),B({isHold:!1,isClick:!1,draggedItem:null,draggedIndex:null}))};return null===(e=document)||void 0===e||e.addEventListener("mouseup",a),function(){var n,e;null===(n=document)||void 0===n||n.removeEventListener("mousemove",t),null===(e=document)||void 0===e||e.removeEventListener("mouseup",a)}}),[l]),(0,o.useEffect)((function(){for(var n=document.querySelectorAll(".swiper-slide"),e=0;e<n.length;e++){var i=n[e];i.style.height="".concat(1.5*i.clientWidth,"px")}}),[I]);var B=function(n){d((function(e){return(0,a.Z)((0,a.Z)({},e),n)}))},_=function(){if(H&&z&&H){var n=(0,t.Z)(I);n.splice(T,1),n.splice(A,0,R),B({ListSlide:n})}B({isHold:!1,isClick:!1,draggedItem:null,draggedIndex:null,draggedOverIndex:null})},G=function(n,e,i){if(n.size/1024/1024>5)return c.ZP.error("File qu\xe1 l\u1edbn"),!1;if(!n.type.startsWith("image/"))return c.ZP.error("Ch\u1ec9 cho ph\xe9p t\u1ea3i l\xean \u1ea3nh"),!1;var l=new FileReader;return l.onloadend=function(){J(l.result,n,e,i)},l.readAsDataURL(n),!1},J=function(n,e,i,l){if(2===l)B({LogoDangNhap:{file:e,url:n}});else if(3===l)B({HinhNenDangNhap:{file:e,url:n}});else{var r=(0,t.Z)(I);r[i]=(0,a.Z)((0,a.Z)({},r[i]),{},{image:n,file:e,imageID:null}),B({ListSlide:r})}};return(0,S.jsxs)(D,{style:{backgroundColor:"#F5F5F5",padding:"20px"},children:[(0,S.jsx)("h1",{style:{fontWeight:"bold"},children:"C\u1ea5u h\xecnh th\xf4ng tin \u0111\u0103ng nh\u1eadp"}),(0,S.jsx)(m.default,{isPreview:!0}),(0,S.jsx)("div",{style:b,children:"T\xean ph\u1ea7n m\u1ec1m"}),(0,S.jsx)(g.Z,{value:U,onChange:function(n){return B({TenPhanMem:n.target.value})}}),(0,S.jsx)("div",{style:b,children:"Slide tr\xecnh chi\u1ebfu"}),(0,S.jsx)("div",{onMouseUp:_,className:"custom-div",children:(0,S.jsxs)(x.tq,{className:"action-swiper",navigation:!0,spaceBetween:30,slidesPerView:5,modules:[y.W_,y.kr],allowTouchMove:!1,onMouseUp:_,mousewheel:{forceToAxis:!0},children:[(0,S.jsx)(x.o5,{style:k,onClick:function(){8===I.length?(c.ZP.destroy(),c.ZP.warning("Ch\u1ec9 \u0111\u01b0\u1ee3c th\xeam t\u1ed1i \u0111a 8 slide")):B({ListSlide:[].concat((0,t.Z)(I),[{}])})},children:(0,S.jsx)(p.Z,{style:{fontSize:"32px"}})}),I?I.map((function(n,e){return(0,S.jsxs)(x.o5,{style:(0,a.Z)((0,a.Z)({},k),{},{"--offset":"".concat(100*e,"%")}),className:e===A?"slide-over":"",onMouseMove:function(i){requestAnimationFrame((function(){return function(n,e,i){P&&B({draggedOverIndex:i,draggedItemOver:n,isHold:!0})}(n,0,e)}))},onMouseDown:function(i){return function(n,e,i,l){M.current=n;var t,a=document.querySelector(".action-swiper .swiper-slide"),r={width:null===a||void 0===a?void 0:a.clientWidth,height:null===a||void 0===a?void 0:a.clientHeight};e&&(null===e||void 0===e||null===(t=e.dataTransfer)||void 0===t||t.setDragImage(img,0,0)),B({isClick:!0,draggedIndex:i,styleDraggLayer:r,draggedItem:n})}(n,i,e)},children:[(0,S.jsx)(h.Z,{style:{position:"absolute",top:0,right:0,fontSize:"20px"},onClick:function(){return function(n){var e=(0,t.Z)(I);e[n].image="",B({ListSlide:e})}(e)}}),(0,S.jsx)(u.Z,{beforeUpload:function(n){return G(n,e)},showUploadList:!1,accept:".png,.jpg,.gif",children:(0,S.jsx)("div",{className:"over-image",children:n.image?(0,S.jsx)("img",{onDragOver:function(n){n.preventDefault()},onDrop:function(n){n.preventDefault()},draggable:!1,src:n.image,alt:"slide",style:{width:"100%"},contentEditable:"false"}):(0,S.jsx)(p.Z,{style:{fontSize:"32px"}})})})]},e)})):null]})}),(0,S.jsxs)("div",{className:"logo-wrap",children:[(0,S.jsx)("p",{style:b,children:"Logo ph\u1ea7n m\u1ec1m"}),(0,S.jsxs)("div",{style:C,className:"upload-wrap",children:[null!==O&&void 0!==O&&O.url?(0,S.jsx)("img",{className:"image-upload",src:O.url}):null,(0,S.jsx)(j.Z,{showGrid:!0,rotationSlider:!0,aspectSlider:!0,showReset:!0,modalTitle:"CH\u1ec8NH S\u1eecA H\xccNH \u1ea2NH",children:(0,S.jsx)(u.Z,{beforeUpload:function(n){return G(n,null,2)},showUploadList:!1,accept:".png,.jpg,.gif",children:(0,S.jsx)("div",{className:"upload-target",children:null!==O&&void 0!==O&&O.url?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("p",{children:"Thay \u0111\u1ed5i \u1ea3nh "}),(0,S.jsx)(f.Z,{})]}):(0,S.jsx)(p.Z,{style:{fontSize:"32px"}})})})})]})]}),(0,S.jsxs)("div",{className:"background-wrap",children:[(0,S.jsx)("p",{style:b,children:"H\xecnh n\u1ec1n"}),(0,S.jsxs)("div",{style:C,className:"upload-wrap",children:[null!==W&&void 0!==W&&W.url?(0,S.jsx)("img",{className:"image-upload",src:W.url}):null,(0,S.jsx)(j.Z,{showGrid:!0,rotationSlider:!0,aspectSlider:!0,showReset:!0,modalTitle:"CH\u1ec8NH S\u1eecA H\xccNH \u1ea2NH",className:"ant-imagecrop__customize",children:(0,S.jsx)(u.Z,{beforeUpload:function(n){return G(n,null,3)},showUploadList:!1,accept:".png,.jpg,.gif",children:(0,S.jsx)("div",{className:"upload-target",children:null!==W&&void 0!==W&&W.url?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("p",{children:"Thay \u0111\u1ed5i \u1ea3nh "}),(0,S.jsx)(f.Z,{})]}):(0,S.jsx)(p.Z,{style:{fontSize:"32px"}})})})})]})]}),(0,S.jsx)(N.ZP,{style:{float:"right",marginBottom:"10px"},onClick:function(){var n=new FormData,e="";I&&(I.forEach((function(e){n.append("SlideAnhFiles",e.file)})),I.forEach((function(n){n.image&&n.imageID&&(e+="".concat(n.imageID,";"))})));var i=e.slice(0,e.length-1);n.append("SlideAnh",i),n.append("HinhNenDangNhapFile",W.file),n.append("TenPhanMem",U),n.append("LogoDangNhapFile",O.file),W.Id&&n.append("HinhNenDangNhap",W.Id),O.Id&&n.append("LogoDangNhap",O.Id),n.append("ID",q),n.append("FileDinhKemJson",JSON.stringify({FileID:0,NghiepVuID:null,DMTenFileID:null,TenFile:null,NgayCapNhat:null,NguoiCapNhat:null,FileType:3,TrangThai:null,FolderPath:null,FileUrl:null,NoiDung:null,IsBaoMat:null,IsMaHoa:null,GroupUID:null})),q?(0,Z.E)(s.J.updateinfoconfigure,n).then((function(n){n.data.Status>0?(c.ZP.destroy(),c.ZP.success(n.data.Message),v(w.Z.getInfo())):(c.ZP.destroy(),c.ZP.warning(n.data.Message))})):s.Z.InsertConfig(n).then((function(n){n.data.Status>0?(c.ZP.destroy(),c.ZP.success(n.data.Message),v(w.Z.getInfo())):(c.ZP.destroy(),c.ZP.warning(n.data.Message))}))},children:"L\u01b0u"}),function(){var n;return null!==T&&H?(0,S.jsx)("div",{ref:F,className:"drag-layer",style:(0,a.Z)((0,a.Z)({position:"fixed",pointerEvents:"none",zIndex:1e3},E),{},{backgroundColor:"#fff",display:"none",justifyContent:"center",alignItems:"center",borderRadius:15}),children:(0,S.jsx)("p",{style:{fontSize:"50px"},children:(0,S.jsx)("img",{style:{width:"100%",height:"auto"},src:null===(n=M.current)||void 0===n?void 0:n.image})})}):null}()]})}}}]);