"use strict";(self.webpackChunkbrvh=self.webpackChunkbrvh||[]).push([[672],{74208:function(n,e,t){t.d(e,{E:function(){return c}});var a=t(45133),i=t.n(a),r=t(66660),c=function(n,e){return i()({method:"POST",url:n,data:e,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat((0,r.Y8)())}}).catch((function(n){var e=n.response,t=e.status,a=e.statusText;return{Status:0,Message:t||a?"".concat(t," - ").concat(a):"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra"}}))}},67225:function(n,e,t){var a,i=t(8491),r=t(30168),c=t(16932);t(32619),l=i.Z,(0,c.ZP)(l)(a||(a=(0,r.Z)(["\n  &.ant-switch-checked {\n    \n  }\n"])));var l},68448:function(n,e,t){t.d(e,{Z:function(){return o}});t(50390);var a,i=t(30168),r=t(16932),c=(t(32619),r.ZP.div(a||(a=(0,i.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  /* padding: 10px 0; */\n  gap: 10px;\n  width: 100%;\n"])))),l=t(62559),o=function(n){return(0,l.jsx)(c,{className:"wrapper-top",children:n.children})}},24274:function(n,e,t){t.d(e,{Z:function(){return s}});t(50390);var a,i=t(30168),r=t(16932),c=t(29665),l=r.ZP.div(a||(a=(0,i.Z)(["\n  /* margin-top: 15px;\n  margin-bottom: 15px; */\n  text-align: right;\n  /* display: inline-block; */\n  flex: 1;\n  padding: 0 3px 0 0;\n  /* margin-bottom: 10px; */\n  display: flex;\n  gap: 10px;\n  justify-content: end;\n  flex-wrap: wrap;\n  align-items: center;\n  @media only screen and (max-width: 1336px) {\n    text-align: left;\n    /* display: block; */\n    flex: none;\n    width: 100%;\n    padding: 0 0 10px 0;\n    margin-top: 5px;\n    margin-bottom: 5px;\n  }\n  /* button {\n    margin-right: 0px;\n    margin-left: 10px;\n    @media only screen and (max-width: 1336px) {\n      margin-left: 0px;\n      margin-right: 10px;\n    }\n  } */\n"]))),o=(0,c.Z)(l),u=t(62559),s=function(n){return(0,u.jsx)(o,{children:n.children})}},32812:function(n,e,t){t.d(e,{z:function(){return r}});var a=t(29439),i=t(50390);function r(n){var e=(0,i.useState)(0),t=(0,a.Z)(e,2),r=t[0],c=t[1];return[r,function(){c(r+1)}]}},21672:function(n,e,t){t.r(e),t.d(e,{default:function(){return A}});var a=t(1413),i=t(29439),r=t(891),c=t(32955),l=t(78333),o=t(14470),u=t(50390),s=t(34424),h=t(3143),d=t(7335),f=t(24274),Z=t(41367),g=t(23194),x=t(31348),p=t(21669),m=t(74208),v=(t(47471),t(67225),t(66660)),j=t(32812),T=t(64693),P=t(31101),S=(t(60606),t(93433)),b=t(70785),y=t(46008),E=t(91565),w=t(41719),C=t(79758),I=t(97555),k=t(81295),D=t(62559),M=y.Z.Item,L=function(n){var e=(0,u.useState)(!1),t=(0,i.Z)(e,2),r=t[0],l=(t[1],(0,u.useState)([])),o=(0,i.Z)(l,2),h=o[0],d=o[1],f=((0,s.v9)((function(n){return n.ListSideBar})).ListSideBar,(0,y.Z.useForm)()),Z=(0,i.Z)(f,1)[0],g=((0,s.I0)(),n.dataEdit);(0,u.useEffect)((function(){}),[]),(0,u.useEffect)((function(){if(g&&g.CoQuanID&&(Z&&Z.setFieldsValue((0,a.Z)({},g)),null!==g&&void 0!==g&&g.TenFileGoc)){var n={TenFileGoc:null===g||void 0===g?void 0:g.TenFileGoc,FileUrl:null===g||void 0===g?void 0:g.UrlFile};d([n])}}),[]);var x=function(n,e,t){var a=(0,S.Z)(t);d(a)},p=function(n,e,t){var a,i=null===(a=(0,v.kA)("data_config"))||void 0===a?void 0:a.fileLimit,r=n.size/1024/1024<i,l=[];return null===t||void 0===t||t.forEach((function(n){h.filter((function(e){return e.TenFileGoc===n.name})).length&&l.push(n)})),r?function(n,e,t){var a=new FileReader;a.addEventListener("load",(function(){return e(a.result,n,t)})),a.readAsDataURL(n)}(n,e,t):c.ZP.error("File \u0111\xednh k\xe8m ph\u1ea3i nh\u1ecf h\u01a1n ".concat(i,"MB")),!1},m=n.visible,j=n.action,T=(0,u.useState)(!1),P=(0,i.Z)(T,2),L=P[0],U=P[1];return(0,D.jsx)(k.Z,{title:"".concat("edit"===j?"C\u1eadp nh\u1eadt":"Th\xeam"," th\xf4ng tin kh\xe1ch h\xe0ng"),width:450,visible:m,onCancel:n.onCancel,footer:[(0,D.jsx)(E.ZP,{onClick:n.onCancel,children:"H\u1ee7y"},"back"),(0,D.jsx)(E.ZP,{htmlType:"submit",type:"primary",form:"FormNgheNhan",loading:r,onClick:function(e){e.preventDefault(),Z.validateFields().then((function(e){var t=(0,a.Z)((0,a.Z)({},e),{},{TenFileGoc:h.length>0?h[0].name:null});(0,n.onCreate)(t,h.length>0?h[0]:null)}))},children:"L\u01b0u"},"submit")],children:(0,D.jsxs)(y.Z,{form:Z,name:"FormNgheNhan",children:["edit"===j?(0,D.jsx)(M,{name:"CoQuanID",hidden:!0}):"",(0,D.jsx)(M,(0,a.Z)((0,a.Z)({label:"T\xean kh\xe1ch h\xe0ng",name:"TenCoQuan"},b.ITEM_LAYOUT),{},{rules:[b.REQUIRED],children:(0,D.jsx)(w.Z,{})})),(0,D.jsx)(M,(0,a.Z)((0,a.Z)({label:"\u0110\u1ecba ch\u1ec9",name:"DiaChi"},b.ITEM_LAYOUT),{},{rules:[b.REQUIRED],children:(0,D.jsx)(w.Z,{})})),(0,D.jsx)(M,(0,a.Z)((0,a.Z)({label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",name:"DienThoai"},b.ITEM_LAYOUT),{},{children:(0,D.jsx)(w.Z,{})})),(0,D.jsx)(M,(0,a.Z)((0,a.Z)({label:"Email",name:"Email"},b.ITEM_LAYOUT),{},{children:(0,D.jsx)(w.Z,{})})),(0,D.jsx)(M,(0,a.Z)((0,a.Z)({label:"Tr\u1ea1ng th\xe1i",name:"IsStatus"},b.ITEM_LAYOUT),{},{rules:[b.REQUIRED],children:(0,D.jsxs)(I.ZP,{children:[(0,D.jsx)(I.Wx,{value:!0,children:"Tri\u1ec3n khai"}),(0,D.jsx)(I.Wx,{value:!1,children:"Kh\xf4ng tri\u1ec3n khai"})]})})),(0,D.jsx)(M,(0,a.Z)((0,a.Z)({label:"M\xe3 c\u01a1 quan",name:"MaCQ"},b.ITEM_LAYOUT),{},{rules:[b.REQUIRED,function(){return{validator:function(n,e){return L?Promise.reject(new Error("Ch\u1ec9 \u0111\u01b0\u1ee3c nh\u1eadp s\u1ed1 v\xe0 ch\u1eef kh\xf4ng d\u1ea5u, kh\xf4ng s\u1eed d\u1ee5ng d\u1ea5u c\xe1ch.")):Promise.resolve()}}}],children:(0,D.jsx)(w.Z,{onChange:function(n){var e=n.target.value;/^[a-zA-Z0-9-_]*$/.test(e)?U(!1):U(!0)}})})),(0,D.jsx)(M,(0,a.Z)((0,a.Z)({label:"CMSAddress",name:"CMSAddress"},b.ITEM_LAYOUT),{},{rules:[b.REQUIRED],children:(0,D.jsx)(w.Z,{})})),(0,D.jsxs)(M,(0,a.Z)((0,a.Z)({label:"Logo kh\xe1ch h\xe0ng"},b.ITEM_LAYOUT),{},{rules:[b.REQUIRED],children:[(0,D.jsx)(C.Z,{showUploadList:!1,actions:!1,beforeUpload:function(n,e){p(n,x,e)},disabled:r,children:(0,D.jsx)(E.ZP,{type:"primary",loading:r,className:"btn-upload",children:"Ch\u1ecdn file t\u1eeb li\u1ec7u t\u1eeb m\xe1y t\xednh"})}),h&&null!==h&&void 0!==h&&h.length?h.map((function(n,e){return(0,D.jsx)("p",{children:(0,D.jsx)("a",{target:"_bank",href:null===n||void 0===n?void 0:n.FileUrl,children:(null===n||void 0===n?void 0:n.name)||(null===n||void 0===n?void 0:n.TenFileGoc)})},e)})):""]}))]})})},U=t(81299),F=t(86460),N=t(79588),R=t(68448);var A=(0,s.$j)((function(n){return(0,a.Z)((0,a.Z)({},n.KhachHang),{},{role:(0,v.Ry)(n.Auth.role,"danh-muc-chuc-vu")})}),o.Z)((function(n){var e=(0,u.useState)(T.parse(n.location.search)),t=(0,i.Z)(e,2),S=t[0],b=t[1],y=(0,u.useState)({}),E=(0,i.Z)(y,2),w=E[0],C=E[1],I=(0,u.useState)(!1),k=(0,i.Z)(I,2),M=k[0],A=k[1],Q=(0,u.useState)(""),z=(0,i.Z)(Q,2),O=z[0],_=z[1],K=(0,j.z)(),Y=(0,i.Z)(K,2),G=Y[0],B=Y[1],V=(0,u.useState)([]),q=(0,i.Z)(V,2),H=(q[0],q[1]),J=(0,u.useState)(!1),W=(0,i.Z)(J,2),X=W[0],$=W[1],nn=(0,s.I0)();document.title="Danh M\u1ee5c Kh\xe1ch H\xe0ng",(0,u.useEffect)((function(){(0,v.ZZ)(S),n.getList(S)}),[S]),(0,u.useEffect)((function(){n.getList(S),nn(o.Z.getInitData(S))}),[]);var en=function(){H([]),C({}),A(!1)},tn=function(e){return(0,D.jsxs)("div",{className:"action-btn",children:[(0,D.jsx)(l.Z,{title:"S\u1eeda",children:(0,D.jsx)(U.Z,{onClick:function(){return n=e.ID,_("edit"),void P.Z.chiTietQLThuVien({ID:n}).then((function(n){n.data.Status>0?(C(n.data.Data),B(),A(!0)):(c.ZP.destroy(),c.ZP.error(n.data.Message))})).catch((function(n){c.ZP.destroy(),c.ZP.error(n.toString())}));var n}})}),(0,D.jsx)(l.Z,{title:"X\xf3a",children:(0,D.jsx)(F.Z,{onClick:function(){return t=e.ID,void r.Z.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a ch\u1ee9c v\u1ee5 n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:function(){$(!0),P.Z.xoaCoQuan(t).then((function(e){e.data.Status>0?($(!1),n.getList((0,a.Z)((0,a.Z)({},S),{},{PageNumber:Math.ceil((cn-1)/S.PageSize)<S.PageNumber?Math.ceil((cn-1)/S.PageSize):S.PageNumber})),c.ZP.destroy(),c.ZP.success(e.data.Message),b((0,a.Z)((0,a.Z)({},S),{},{PageNumber:Math.ceil((cn-1)/S.PageSize)<S.PageNumber?Math.ceil((cn-1)/S.PageSize):S.PageNumber}))):(c.ZP.destroy(),c.ZP.error(e.data.Message))})).catch((function(n){c.ZP.destroy(),c.ZP.error(n.toString())}))}});var t}})})]})},an=n.DanhSachKhachHang,rn=n.DanhSachDMThuVien,cn=n.TotalRow,ln=(n.role,S.PageNumber?parseInt(S.PageNumber):1),on=S.PageSize?parseInt(S.PageSize):(0,v.hL)(),un=[{title:"S\u1ed1 th\u1ee9 t\u1ef1",width:"10%",align:"center",render:function(n,e,t){return(0,D.jsx)("span",{children:(ln-1)*on+(t+1)})}},{title:"T\xean kh\xe1ch h\xe0ng",dataIndex:"Ten",align:"left",width:"25%"},{title:"\u0110\u1ecba ch\u1ec9",dataIndex:"DiaChi",align:"left",width:"20%"},{title:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",dataIndex:"DienThoai",align:"left",width:"15%"},{title:"Email",dataIndex:"Email",align:"left",width:"15%"},{title:"M\xe3 c\u01a1 quan",dataIndex:"MaCQ",align:"left",width:"15%"},{title:"Tr\u1ea1ng th\xe1i",dataIndex:"IsStatus",align:"center",width:"10%",render:function(n){return!0===n?(0,D.jsx)("span",{children:"Tri\u1ec3n khai"}):!1===n?(0,D.jsx)("span",{children:"Kh\xf4ng tri\u1ec3n khai"}):(0,D.jsx)("span",{children:"Tr\u1ea1ng th\xe1i kh\xe1c"})}},{title:"Thao t\xe1c",width:"10%",align:"center",margin:"15px",render:function(n,e){return tn(e)}}];return(0,D.jsxs)(h.Z,{children:[(0,D.jsxs)(R.Z,{children:[(0,D.jsx)(d.Z,{children:"Danh M\u1ee5c Kh\xe1ch H\xe0ng"}),(0,D.jsx)(f.Z,{children:(0,D.jsxs)(p.zx,{type:"primary",onClick:function(){_("add"),C({}),B(),A(!0)},children:[(0,D.jsx)(N.Z,{}),"Th\xeam m\u1edbi"]})})]}),(0,D.jsxs)(Z.Z,{children:[(0,D.jsx)(g.Z,{children:(0,D.jsx)(p.Vr,{defaultValue:S.Keyword,placeholder:"Nh\u1eadp t\xean kh\xe1ch h\xe0ng",style:{width:300},onSearch:function(n){return function(n,e){var t=S,a={value:n,property:e},i=(0,v.mB)(t,a,null);b(i),H([])}(n,"Keyword")},allowClear:!0})}),(0,D.jsx)(x.ZP,{columns:un,dataSource:an,onChange:function(n,e,t){var a=S,i={pagination:n,filters:e,sorter:t},r=(0,v.mB)(a,null,i);b(r),H([])},pagination:{showSizeChanger:!0,showTotal:function(n,e){return"T\u1eeb ".concat(e[0]," \u0111\u1ebfn ").concat(e[1]," tr\xean ").concat(n," k\u1ebft qu\u1ea3")},total:cn,current:ln,pageSize:on},rowKey:function(n){return n.ID}})]}),(0,D.jsx)(L,{visible:M,dataEdit:w,action:O,loading:X,onCreate:function(n,e){if($(!0),"add"===O){var t=new FormData;t.append("files",e),t.append("coQuanStr",JSON.stringify(n)),(0,m.E)(P.J.themqlthuvien,t).then((function(n){$(!1),n.data.Status>0?(c.ZP.success("Th\xeam th\xe0nh c\xf4ng"),en(),nn(o.Z.getList(S)),nn(o.Z.getGuild())):(c.ZP.destroy(),c.ZP.error(n.data.Message))})).catch((function(n){c.ZP.destroy(),c.ZP.error(n.toString())}))}if("edit"===O){var a=new FormData;a.append("updateCoQuanDonVi",JSON.stringify(n)),a.append("files",e),(0,m.E)(P.J.suaqlthuvien,a).then((function(n){$(!1),n.data.Status>0?(c.ZP.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),en(),nn(o.Z.getList(S)),nn(o.Z.getGuild())):(c.ZP.destroy(),c.ZP.error(n.data.Message))})).catch((function(n){c.ZP.destroy(),c.ZP.error(n.toString())}))}},onCancel:en,danhSachDMThuVien:rn},G)]})}))}}]);