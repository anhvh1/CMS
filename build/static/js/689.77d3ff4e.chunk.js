"use strict";(self.webpackChunkbrvh=self.webpackChunkbrvh||[]).push([[689],{44024:function(n,e,t){t.d(e,{_:function(){return l},c:function(){return c}});var a=t(1413),i=t(46008),r=t(66660),o=t(62559),l=function(n){return(0,o.jsx)(i.Z,(0,a.Z)((0,a.Z)({onForm:i.Z.useForm},n),{},{onFieldsChange:function(){(0,r.dM)(n.form||n.ref,n.onChangeStatusButton,n.name)}}))},c=i.Z.useForm},94115:function(n,e,t){t.d(e,{c:function(){return d}});var a=t(1413),i=t(93433),r=t(46008),o=t(66660),l=t(70785),c=t(62559),u=r.Z.Item,d=function(n){var e=n.rules?n.rules:[];return(0,c.jsx)(u,(0,a.Z)((0,a.Z)({},n),{},{rules:[].concat((0,i.Z)(e),[{validator:function(e,t,a){return(0,o.ft)(e,t,a,l.MAXLENGTH,null===n||void 0===n?void 0:n.label)}}])}))}},24274:function(n,e,t){t.d(e,{Z:function(){return d}});t(50390);var a,i=t(30168),r=t(16932),o=t(29665),l=r.ZP.div(a||(a=(0,i.Z)(["\n  /* margin-top: 15px;\n  margin-bottom: 15px; */\n  text-align: right;\n  /* display: inline-block; */\n  flex: 1;\n  padding: 0 3px 0 0;\n  /* margin-bottom: 10px; */\n  display: flex;\n  gap: 10px;\n  justify-content: end;\n  flex-wrap: wrap;\n  align-items: center;\n  @media only screen and (max-width: 1336px) {\n    text-align: left;\n    /* display: block; */\n    flex: none;\n    width: 100%;\n    padding: 0 0 10px 0;\n    margin-top: 5px;\n    margin-bottom: 5px;\n  }\n  /* button {\n    margin-right: 0px;\n    margin-left: 10px;\n    @media only screen and (max-width: 1336px) {\n      margin-left: 0px;\n      margin-right: 10px;\n    }\n  } */\n"]))),c=(0,o.Z)(l),u=t(62559),d=function(n){return(0,u.jsx)(c,{children:n.children})}},32812:function(n,e,t){t.d(e,{z:function(){return r}});var a=t(29439),i=t(50390);function r(n){var e=(0,i.useState)(0),t=(0,a.Z)(e,2),r=t[0],o=t[1];return[r,function(){o(r+1)}]}},37689:function(n,e,t){t.r(e),t.d(e,{default:function(){return G}});var a=t(29439),i=t(49718),r=t(41719),o=t(891),l=t(32955),c=t(78333),u=t(7335),d=t(24274),s=t(71017),h=t(42364),g=t(62187),f=t(81299),Z=t(86460),m=t(1413),x=t(50390),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"},p=t(34224),y=function(n,e){return x.createElement(p.Z,(0,m.Z)((0,m.Z)({},n),{},{ref:e,icon:v}))};y.displayName="RollbackOutlined";var D=x.forwardRef(y),T=t(79588),S=t(41367),j=t(23194),C=t(31348),w=t(3143),I=t(66660),L=t(64693),M=t(74165),b=t(15861),P=t(70785),N=t(86424),E=t(43946),k=t.n(E),A=t(34424),Y=t(60684),_=t(94115),Q=t(44024);var U,z=t(62559),B=function(n){var e=(0,Q.c)(),t=(0,a.Z)(e,1)[0],i=n.dataEdit,r=n.loading,o=n.visible,l=n.action,c=n.DanhSachCoQuan,u=void 0===c?[]:c,d=(n.DanhSachChucVu,(0,x.useState)("")),h=(0,a.Z)(d,2),g=(h[0],h[1]),f=(0,x.useState)(!1),Z=(0,a.Z)(f,2),v=Z[0],p=(Z[1],(0,x.useState)([])),y=(0,a.Z)(p,2),D=y[0],T=y[1],S=(0,x.useState)(""),j=(0,a.Z)(S,2),C=j[0],w=j[1],I=(0,x.useState)(""),L=(0,a.Z)(I,2),E=L[0],A=L[1],U=(0,x.useState)(!0),B=(0,a.Z)(U,2),O=B[0],R=B[1];(0,x.useEffect)((function(){if(i&&i.CanBoID){var n=k()(i.NgaySinh).format("DD/MM/YYYY");t&&t.setFieldsValue((0,m.Z)((0,m.Z)({},i),{},{NgaySinh:i&&i.NgaySinh?k()(n,"DD/MM/YYYY"):"",XemTaiLieuMat:!(null===i||void 0===i||!i.XemTaiLieuMat||1!==(null===i||void 0===i?void 0:i.XemTaiLieuMat))||0,QuanTriDonVi:!(null===i||void 0===i||!i.QuanTriDonVi||1!==(null===i||void 0===i?void 0:i.QuanTriDonVi))||0,QuyenKy:!(null===i||void 0===i||!i.QuyenKy||1!==(null===i||void 0===i?void 0:i.QuyenKy))||0}))}Y.Z.danhSachNhomAll().then((function(n){n.data.Status>0&&T(n.data.Data)}))}),[]);var q=function(n){return/^[0-9]{0,11}$/.test(n)?(A(""),!0):(A("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7"),!1)},H=function(){var e=(0,b.Z)((0,M.Z)().mark((function e(a){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),q(C)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,t.validateFields().then((function(e){e.LaCanBo=v,e.XemTaiLieuMat=null!==e&&void 0!==e&&e.XemTaiLieuMat?1:0,e.QuanTriDonVi=null!==e&&void 0!==e&&e.QuanTriDonVi?1:0,e.QuyenKy=null!==e&&void 0!==e&&e.QuyenKy?1:0;var t=(0,m.Z)({},e);for(var a in t)t[a]||delete t[a];n.onCreate(t)}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,z.jsx)(s.u_,{title:"".concat("edit"===l?"S\u1eeda":"Th\xeam"," th\xf4ng tin ng\u01b0\u1eddi d\xf9ng"),width:700,visible:o,onCancel:n.onCancel,footer:[(0,z.jsx)(s.zx,{onClick:n.onCancel,children:"H\u1ee7y"},"back"),(0,z.jsx)(s.zx,{htmlType:"submit",type:"primary",form:"FormUserManagement",loading:r,onClick:H,disabled:!O,children:"L\u01b0u"},"submit")],children:(0,z.jsxs)(Q._,{form:t,name:"FormUserManagement",initialValues:{TrangThaiID:0},children:["edit"===l?(0,z.jsx)(_.c,{name:"CanBoID",hidden:!0}):"","edit"===l?(0,z.jsx)(_.c,{name:"NguoiDungID",hidden:!0}):"",(0,z.jsx)(_.c,(0,m.Z)((0,m.Z)({label:"T\xean t\xe0i kho\u1ea3n",name:"TenNguoiDung",rules:[(0,m.Z)({},P.REQUIRED)]},P.ITEM_LAYOUT_SMALL),{},{children:(0,z.jsx)(s.II,{onChange:function(n){return t&&t.setFieldsValue({SSOID:n.target.value})}})})),(0,z.jsx)(_.c,(0,m.Z)((0,m.Z)({label:"H\u1ecd v\xe0 t\xean",name:"TenCanBo",rules:[(0,m.Z)({},P.REQUIRED)]},P.ITEM_LAYOUT_SMALL),{},{children:(0,z.jsx)(s.II,{})})),(0,z.jsx)(_.c,(0,m.Z)((0,m.Z)({label:"Ng\xe0y sinh",name:"NgaySinh"},P.ITEM_LAYOUT_SMALL),{},{children:(0,z.jsx)(N.C,{onChange:function(n,e){g(n)},format:"DD/MM/YYYY",placeholder:"",style:{width:"100%"}})})),(0,z.jsx)(_.c,(0,m.Z)((0,m.Z)({label:"Gi\u1edbi t\xednh",name:"GioiTinh"},P.ITEM_LAYOUT_SMALL),{},{children:(0,z.jsxs)(s.Ph,{placeholder:"Ch\u1ecdn gi\u1edbi t\xednh",style:{width:"100%"},children:[(0,z.jsx)(s.Wx,{value:1,children:"Nam"},1),(0,z.jsx)(s.Wx,{value:0,children:"N\u1eef"},0),(0,z.jsx)(s.Wx,{value:2,children:"Kh\xe1c"},2)]})})),(0,z.jsx)(_.c,(0,m.Z)((0,m.Z)({label:"\u0110\u1ecba ch\u1ec9",name:"DiaChi"},P.ITEM_LAYOUT_SMALL),{},{children:(0,z.jsx)(s.II,{})})),(0,z.jsx)(_.c,(0,m.Z)((0,m.Z)({label:"T\xean c\u01a1 quan",name:"CoQuanID",rules:[(0,m.Z)({},P.REQUIRED)]},P.ITEM_LAYOUT_SMALL),{},{children:(0,z.jsx)(s.mP,{showSearch:!0,treeData:u,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Ch\u1ecdn c\u01a1 quan",allowClear:!0,treeDefaultExpandAll:!0,notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",treeNodeFilterProp:"title"})})),(0,z.jsx)(_.c,(0,m.Z)((0,m.Z)({label:"Nh\xf3m ng\u01b0\u1eddi d\xf9ng",name:"DanhSachNhomNguoiDungID"},P.ITEM_LAYOUT_SMALL),{},{children:(0,z.jsx)(s.Ph,{style:{width:"100%"},mode:"multiple",children:null===D||void 0===D?void 0:D.map((function(n){return(0,z.jsx)(s.Wx,{value:n.NhomNguoiDungID,children:n.TenNhom},n.NhomNguoiDungID)}))})})),(0,z.jsx)(_.c,(0,m.Z)((0,m.Z)({label:"Email",name:"Email",rules:[{type:"email",message:"Vui l\xf2ng nh\u1eadp \u0111\xfang \u0111\u1ecbnh d\u1ea1ng "}]},P.ITEM_LAYOUT_SMALL),{},{children:(0,z.jsx)(s.II,{type:"email"})})),(0,z.jsx)(_.c,(0,m.Z)((0,m.Z)({label:"\u0110i\u1ec7n tho\u1ea1i",name:"DienThoai"},P.ITEM_LAYOUT_SMALL),{},{validateStatus:E?"error":"",help:E,children:(0,z.jsx)(s.II,{onChange:function(n){var e=n.target.value;w(e),R(q(e))},value:C})})),(0,z.jsx)(_.c,(0,m.Z)((0,m.Z)({label:"Tr\u1ea1ng th\xe1i",name:"TrangThaiID",rules:[(0,m.Z)({},P.REQUIRED)]},P.ITEM_LAYOUT_SMALL),{},{children:(0,z.jsxs)(s.Ph,{style:{width:"100%"},placeholder:"Ch\u1ecdn tr\u1ea1ng th\xe1i",children:[(0,z.jsx)(s.Wx,{value:1,children:"Ngh\u1ec9 h\u01b0u"},1),(0,z.jsx)(s.Wx,{value:0,children:"\u0110ang l\xe0m"},0),(0,z.jsx)(s.Wx,{value:2,children:"Chuy\u1ec3n c\xf4ng t\xe1c"},2),(0,z.jsx)(s.Wx,{value:3,children:"Ngh\u1ec9 vi\u1ec7c"},3)]})}))]})})},O=t(32812),R=t(30168),q=t(16932).ZP.div(U||(U=(0,R.Z)(["\n /* margin-top: 100px;\n    .wrapper-topbar {\n        display: flex;\n        .wrapper-topbar__items{\n            display: flex;\n            align-items: center;\n            p {\n                margin-right: 20px;\n            }\n        }\n    }\n    .action-btn {\n    .anticon {\n      margin-right: 10px;\n      font-size: 25px;\n      \n      &:last-child {\n        margin-right: 0;\n      }\n    }\n    \n    a {\n      color: inherit !important;\n      margin-right: 10px;\n    }\n  }\n  @media only screen and (max-width: 730px) { \n    .wrapper-topbar {\n      flex-direction: column;\n    }\n  } */\n"]))),H=t(18467),F=t(60606),V=t.n(F),K=(i.Z.Sider,r.Z.Search),G=(0,A.$j)((function(n){return{auth:n.Auth.user}}))((function(n){document.title="Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng";var e=(0,x.useState)(L.parse(n.location.search)),t=(0,a.Z)(e,2),i=t[0],r=t[1],m=(0,x.useState)(!1),v=(0,a.Z)(m,2),p=v[0],y=v[1],M=(0,O.z)(),b=(0,a.Z)(M,2),P=b[0],N=b[1],E=(0,x.useState)({}),k=(0,a.Z)(E,2),Y=k[0],_=k[1],Q=(0,x.useState)(!1),U=(0,a.Z)(Q,2),R=U[0],F=U[1],G=(0,x.useState)(""),W=(0,a.Z)(G,2),X=W[0],$=W[1],J=(0,A.v9)((function(n){return n.DMCoQuan})).DanhSachCoQuan,nn=(0,A.I0)(),en=n.role,tn=(0,A.v9)((function(n){return n.QLNguoiDung})),an=tn.ListNguoiDung,rn=tn.TotalRow,on=tn.tableLoading;(0,x.useEffect)((function(){nn(g.Z.getInitData())}),[]),(0,x.useEffect)((function(){(0,I.ZZ)(i),nn(h.Z.getList(i))}),[i]);var ln=function(){$(""),_({}),y(!1)},cn=function(n,e){var t=i,a={value:n,property:e},o=(0,I.mB)(t,a,null);r(o)},un=function(n){return(0,z.jsxs)("div",{className:"action-btn",children:[en&&en.edit?(0,z.jsx)(c.Z,{title:"S\u1eeda",children:(0,z.jsx)(f.Z,{onClick:function(){return e=n.CanBoID,$("edit"),void H.Z.DetailsUser({CanBoID:e}).then((function(n){n.data.Status>0?(_(n.data.Data),y(!0),N()):(l.ZP.destroy(),l.ZP.warning(n.data.Message))})).catch((function(n){l.ZP.destroy(),l.ZP.warning(n.toString())}));var e}})}):"",en&&en.delete?(0,z.jsx)(c.Z,{title:"X\xf3a",children:(0,z.jsx)(Z.Z,{onClick:function(){return e=n.CanBoID,void o.Z.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a d\u1eef li\u1ec7u c\u1ee7a ng\u01b0\u1eddi d\xf9ng n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:function(){H.Z.DeleteUser({ListID:[e]}).then((function(n){n.data.Status>0?(nn(h.Z.getList(i)),l.ZP.destroy(),l.ZP.success(n.data.Message)):(l.ZP.destroy(),l.ZP.error(n.data.Message))})).catch((function(n){l.ZP.destroy(),l.ZP.error(n.toString())}))}});var e}})}):null,(0,z.jsx)(c.Z,{title:"\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u",children:(0,z.jsx)(D,{onClick:function(){return e=n.NguoiDungID,void o.Z.confirm({title:"\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u",content:"B\u1ea1n c\xf3 mu\u1ed1n \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u cho ng\u01b0\u1eddi d\xf9ng n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:function(){H.Z.ResetPassword({NguoiDungID:e}).then((function(n){n.data.Status>0?(nn(h.Z.getList(i)),l.ZP.destroy(),l.ZP.success(n.data.Message)):(l.ZP.destroy(),l.ZP.error(n.data.Message))})).catch((function(n){l.ZP.destroy(),l.ZP.error(n.toString())}))}});var e}})})]})},dn=[{title:"STT",align:"center",width:5,render:function(n,e,t){return(0,z.jsx)("span",{children:(sn-1)*hn+(t+1)})}},{title:"H\u1ecd v\xe0 t\xean",dataIndex:"TenCanBo",width:14},{title:"T\xean t\xe0i kho\u1ea3n",dataIndex:"TenNguoiDung",width:14},{title:"Ng\xe0y sinh",dataIndex:"NgaySinh",align:"center",width:14,render:function(n,e,t){return n?V()(n).format("DD/MM/YYYY"):""}},{title:"Gi\u1edbi t\xednh",dataIndex:"GioiTinh",width:5,render:function(n,e,t){return 1===e.GioiTinh?"Nam":2===e.GioiTinh?"Kh\xe1c":0===e.GioiTinh?"N\u1eef":""}},{title:"\u0110\u1ecba ch\u1ec9",dataIndex:"DiaChi",align:"center",width:14},{title:"C\u01a1 quan",dataIndex:"TenCoQuan",align:"center",width:14},{title:"Thao t\xe1c",align:"center",width:13,render:function(n,e){return un(e)}}],sn=i.PageNumber?parseInt(i.PageNumber):1,hn=i.PageSize?parseInt(i.PageSize):(0,I.hL)();return(0,z.jsx)(q,{children:(0,z.jsxs)(w.Z,{children:[(0,z.jsx)(u.Z,{children:"Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng"}),(0,z.jsx)(d.Z,{children:en.add?(0,z.jsxs)(s.zx,{onClick:function(){$("add"),_({}),N(),y(!0)},children:[(0,z.jsx)(T.Z,{}),"Th\xeam"]}):null}),(0,z.jsxs)(S.Z,{children:[(0,z.jsxs)(j.Z,{children:[(0,z.jsx)(s.mP,{showSearch:!0,treeData:J,onChange:function(n){return cn(n,"CoQuanID")},style:{width:400},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Ch\u1ecdn c\u01a1 quan",allowClear:!0,treeDefaultExpandAll:!0,notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",treeNodeFilterProp:"title"}),(0,z.jsx)(K,{placeholder:"Nh\u1eadp t\xean c\xe1n b\u1ed9, ng\u01b0\u1eddi d\xf9ng ho\u1eb7c c\u01a1 quan c\u1ea7n t\xecm ki\u1ebfm",onSearch:function(n){return cn(n,"keyword")},style:{width:350},defaultValue:i.Keyword,allowClear:!0})]}),(0,z.jsx)(C.ZP,{columns:dn,dataSource:an,loading:on,onChange:function(n,e,t){var a=i,o={pagination:n,filters:e,sorter:t},l=(0,I.mB)(a,null,o);r(l)},pagination:{showSizeChanger:!0,showTotal:function(n,e){return"T\u1eeb ".concat(e[0]," \u0111\u1ebfn ").concat(e[1]," tr\xean ").concat(n," k\u1ebft qu\u1ea3")},total:rn,current:sn,pageSize:hn}})]}),(0,z.jsx)(B,{visible:p,onCancel:ln,dataEdit:Y,onCreate:function(n){F(!0),"add"===X?(delete n.CanBoID,H.Z.AddUser(n).then((function(n){F(!1),n.data.Status>0?(l.ZP.destroy(),l.ZP.success("Th\xeam c\xe1n b\u1ed9 th\xe0nh c\xf4ng"),ln(),nn(h.Z.getList(i))):(l.ZP.destroy(),l.ZP.error(n.data.Message))})).catch((function(n){F(!1),l.ZP.destroy(),l.ZP.error(n.toString())}))):"edit"===X&&H.Z.EditUser(n).then((function(n){F(!1),n.data.Status>0?(l.ZP.destroy(),l.ZP.success("C\u1eadp nh\u1eadt c\xe1n b\u1ed9 th\xe0nh c\xf4ng"),ln(),nn(h.Z.getList(i))):(l.ZP.destroy(),l.ZP.error(n.data.Message))})).catch((function(n){F(!1),l.ZP.destroy(),l.ZP.error(n.toString())}))},loading:R,action:X,DanhSachCoQuan:J},P)]})})}))},86460:function(n,e,t){t.d(e,{Z:function(){return c}});var a=t(1413),i=t(50390),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},o=t(34224),l=function(n,e){return i.createElement(o.Z,(0,a.Z)((0,a.Z)({},n),{},{ref:e,icon:r}))};l.displayName="DeleteOutlined";var c=i.forwardRef(l)},81299:function(n,e,t){t.d(e,{Z:function(){return c}});var a=t(1413),i=t(50390),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},o=t(34224),l=function(n,e){return i.createElement(o.Z,(0,a.Z)((0,a.Z)({},n),{},{ref:e,icon:r}))};l.displayName="EditOutlined";var c=i.forwardRef(l)},79588:function(n,e,t){t.d(e,{Z:function(){return c}});var a=t(1413),i=t(50390),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},o=t(34224),l=function(n,e){return i.createElement(o.Z,(0,a.Z)((0,a.Z)({},n),{},{ref:e,icon:r}))};l.displayName="PlusOutlined";var c=i.forwardRef(l)}}]);