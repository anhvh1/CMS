"use strict";(self.webpackChunkbrvh=self.webpackChunkbrvh||[]).push([[672],{74208:function(n,e,t){t.d(e,{E:function(){return c}});var a=t(45133),i=t.n(a),r=t(66660),c=function(n,e){return i()({method:"POST",url:n,data:e,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat((0,r.Y8)())}}).catch((function(n){var e=n.response,t=e.status,a=e.statusText;return{Status:0,Message:t||a?"".concat(t," - ").concat(a):"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra"}}))}},67225:function(n,e,t){var a,i=t(8491),r=t(30168),c=t(16932);t(32619),l=i.Z,(0,c.ZP)(l)(a||(a=(0,r.Z)(["\n  &.ant-switch-checked {\n    \n  }\n"])));var l},68448:function(n,e,t){t.d(e,{Z:function(){return o}});t(50390);var a,i=t(30168),r=t(16932),c=(t(32619),r.ZP.div(a||(a=(0,i.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  /* padding: 10px 0; */\n  gap: 10px;\n  width: 100%;\n"])))),l=t(62559),o=function(n){return(0,l.jsx)(c,{className:"wrapper-top",children:n.children})}},24274:function(n,e,t){t.d(e,{Z:function(){return s}});t(50390);var a,i=t(30168),r=t(16932),c=t(29665),l=r.ZP.div(a||(a=(0,i.Z)(["\n  /* margin-top: 15px;\n  margin-bottom: 15px; */\n  text-align: right;\n  /* display: inline-block; */\n  flex: 1;\n  padding: 0 3px 0 0;\n  /* margin-bottom: 10px; */\n  display: flex;\n  gap: 10px;\n  justify-content: end;\n  flex-wrap: wrap;\n  align-items: center;\n  @media only screen and (max-width: 1336px) {\n    text-align: left;\n    /* display: block; */\n    flex: none;\n    width: 100%;\n    padding: 0 0 10px 0;\n    margin-top: 5px;\n    margin-bottom: 5px;\n  }\n  /* button {\n    margin-right: 0px;\n    margin-left: 10px;\n    @media only screen and (max-width: 1336px) {\n      margin-left: 0px;\n      margin-right: 10px;\n    }\n  } */\n"]))),o=(0,c.Z)(l),u=t(62559),s=function(n){return(0,u.jsx)(o,{children:n.children})}},32812:function(n,e,t){t.d(e,{z:function(){return r}});var a=t(29439),i=t(50390);function r(n){var e=(0,i.useState)(0),t=(0,a.Z)(e,2),r=t[0],c=t[1];return[r,function(){c(r+1)}]}},21672:function(n,e,t){t.r(e),t.d(e,{default:function(){return R}});var a=t(1413),i=t(29439),r=t(5718),c=t(97612),l=t(78333),o=t(14470),u=t(50390),s=t(34424),d=t(3143),h=t(7335),f=t(24274),Z=t(41367),g=t(23194),x=t(31348),p=t(19877),m=t(74208),v=(t(47471),t(67225),t(66660)),T=t(32812),j=t(64693),P=t(31101),S=(t(60606),t(93433)),y=t(70785),b=t(46008),w=t(96086),C=t(41719),E=t(79758),I=t(97555),D=t(81295),k=t(62559),M=b.Z.Item,L=function(n){var e=(0,u.useState)(!1),t=(0,i.Z)(e,2),r=t[0],l=(t[1],(0,u.useState)([])),o=(0,i.Z)(l,2),d=o[0],h=o[1],f=((0,s.v9)((function(n){return n.ListSideBar})).ListSideBar,(0,u.useState)(!1)),Z=(0,i.Z)(f,2),g=(Z[0],Z[1],(0,b.Z.useForm)()),x=(0,i.Z)(g,1)[0],p=((0,s.I0)(),n.dataEdit);n.danhSachDMThuVien;(0,u.useEffect)((function(){}),[]),(0,u.useEffect)((function(){if(p&&p.CoQuanID&&(x&&x.setFieldsValue((0,a.Z)({},p)),null!==p&&void 0!==p&&p.TenFileGoc)){var n={TenFileGoc:null===p||void 0===p?void 0:p.TenFileGoc,FileUrl:null===p||void 0===p?void 0:p.UrlFile};h([n])}}),[]);var m=function(n,e,t){var a=(0,S.Z)(t);h(a)},T=function(n,e,t){var a,i=null===(a=(0,v.kA)("data_config"))||void 0===a?void 0:a.fileLimit,r=n.size/1024/1024<i,l=[];return null===t||void 0===t||t.forEach((function(n){d.filter((function(e){return e.TenFileGoc===n.name})).length&&l.push(n)})),r?function(n,e,t){var a=new FileReader;a.addEventListener("load",(function(){return e(a.result,n,t)})),a.readAsDataURL(n)}(n,e,t):c.ZP.error("File \u0111\xednh k\xe8m ph\u1ea3i nh\u1ecf h\u01a1n ".concat(i,"MB")),!1},j=(n.confirmLoading,n.visible),P=(n.onCancel,n.action);n.danhSachBaoTang;return(0,k.jsx)(D.Z,{title:"".concat("edit"===P?"C\u1eadp nh\u1eadt":"Th\xeam"," th\xf4ng tin kh\xe1ch h\xe0ng"),width:450,visible:j,onCancel:n.onCancel,footer:[(0,k.jsx)(w.ZP,{onClick:n.onCancel,children:"H\u1ee7y"},"back"),(0,k.jsx)(w.ZP,{htmlType:"submit",type:"primary",form:"FormNgheNhan",loading:r,onClick:function(e){e.preventDefault(),x.validateFields().then((function(e){if(d.length<1)return c.ZP.destroy(),void c.ZP.warning("Ch\u01b0a ch\u1ecdn file \u0111\xednh k\xe8m");var t=(0,a.Z)((0,a.Z)({},e),{},{TenFileGoc:d[0].name});(0,n.onCreate)(t,d[0])}))},children:"L\u01b0u"},"submit")],children:(0,k.jsxs)(b.Z,{form:x,name:"FormNgheNhan",children:["edit"===P?(0,k.jsx)(M,{name:"CoQuanID",hidden:!0}):"",(0,k.jsx)(M,(0,a.Z)((0,a.Z)({label:"T\xean c\u01a1 quan",name:"TenCoQuan"},y.ITEM_LAYOUT),{},{rules:[y.REQUIRED],children:(0,k.jsx)(C.Z,{})})),(0,k.jsx)(M,(0,a.Z)((0,a.Z)({label:"\u0110\u1ecba ch\u1ec9",name:"DiaChi"},y.ITEM_LAYOUT),{},{rules:[y.REQUIRED],children:(0,k.jsx)(C.Z,{})})),(0,k.jsx)(M,(0,a.Z)((0,a.Z)({label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",name:"DienThoai"},y.ITEM_LAYOUT),{},{children:(0,k.jsx)(C.Z,{})})),(0,k.jsx)(M,(0,a.Z)((0,a.Z)({label:"Email",name:"Email"},y.ITEM_LAYOUT),{},{children:(0,k.jsx)(C.Z,{})})),(0,k.jsx)(M,(0,a.Z)((0,a.Z)({label:"Tr\u1ea1ng th\xe1i",name:"IsStatus"},y.ITEM_LAYOUT),{},{rules:[y.REQUIRED],children:(0,k.jsxs)(I.ZP,{children:[(0,k.jsx)(I.Wx,{value:!0,children:"Tri\u1ec3n khai"}),(0,k.jsx)(I.Wx,{value:!1,children:"Kh\xf4ng tri\u1ec3n khai"})]})})),(0,k.jsx)(M,(0,a.Z)((0,a.Z)({label:"M\xe3 c\u01a1 quan",name:"MaCQ"},y.ITEM_LAYOUT),{},{rules:[y.REQUIRED],children:(0,k.jsx)(C.Z,{})})),(0,k.jsxs)(M,(0,a.Z)((0,a.Z)({label:"Th\xf4ng tin chi ti\u1ebft"},y.ITEM_LAYOUT),{},{rules:[y.REQUIRED],children:[(0,k.jsx)(E.Z,{showUploadList:!1,actions:!1,beforeUpload:function(n,e){T(n,m,e)},disabled:r,children:(0,k.jsx)(w.ZP,{type:"primary",loading:r,className:"btn-upload",children:"Ch\u1ecdn file t\u1eeb li\u1ec7u t\u1eeb m\xe1y t\xednh"})}),d&&null!==d&&void 0!==d&&d.length?d.map((function(n,e){return(0,k.jsx)("p",{children:(0,k.jsx)("a",{target:"_bank",href:null===n||void 0===n?void 0:n.FileUrl,children:(null===n||void 0===n?void 0:n.name)||(null===n||void 0===n?void 0:n.TenFileGoc)})},e)})):""]}))]})})},F=t(81299),N=t(86460),U=t(79588),Q=t(68448);var R=(0,s.$j)((function(n){return(0,a.Z)((0,a.Z)({},n.KhachHang),{},{role:(0,v.Ry)(n.Auth.role,"danh-muc-chuc-vu")})}),o.Z)((function(n){var e=(0,u.useState)(j.parse(n.location.search)),t=(0,i.Z)(e,2),S=t[0],y=t[1],b=(0,u.useState)({}),w=(0,i.Z)(b,2),C=w[0],E=w[1],I=(0,u.useState)(!1),D=(0,i.Z)(I,2),M=D[0],R=D[1],z=(0,u.useState)(""),A=(0,i.Z)(z,2),O=A[0],K=A[1],_=(0,T.z)(),B=(0,i.Z)(_,2),G=B[0],V=B[1],Y=(0,u.useState)([]),q=(0,i.Z)(Y,2),H=(q[0],q[1]),J=(0,u.useState)(!1),W=(0,i.Z)(J,2),X=W[0],$=W[1],nn=(0,s.I0)();document.title="Danh M\u1ee5c Kh\xe1ch H\xe0ng",(0,u.useEffect)((function(){(0,v.ZZ)(S),n.getList(S)}),[S]),(0,u.useEffect)((function(){n.getList(S),nn(o.Z.getInitData(S))}),[]);var en=function(){H([]),E({}),R(!1)},tn=function(e){return(0,k.jsxs)("div",{className:"action-btn",children:[(0,k.jsx)(l.Z,{title:"S\u1eeda",children:(0,k.jsx)(F.Z,{onClick:function(){return n=e.ID,K("edit"),void P.Z.chiTietQLThuVien({ID:n}).then((function(n){n.data.Status>0?(E(n.data.Data),V(),R(!0)):(c.ZP.destroy(),c.ZP.error(n.data.Message))})).catch((function(n){c.ZP.destroy(),c.ZP.error(n.toString())}));var n}})}),(0,k.jsx)(l.Z,{title:"X\xf3a",children:(0,k.jsx)(N.Z,{onClick:function(){return t=e.ID,void r.Z.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a ch\u1ee9c v\u1ee5 n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:function(){$(!0),P.Z.xoaCoQuan(t).then((function(e){e.data.Status>0?($(!1),n.getList((0,a.Z)((0,a.Z)({},S),{},{PageNumber:Math.ceil((cn-1)/S.PageSize)<S.PageNumber?Math.ceil((cn-1)/S.PageSize):S.PageNumber})),c.ZP.destroy(),c.ZP.success(e.data.Message),y((0,a.Z)((0,a.Z)({},S),{},{PageNumber:Math.ceil((cn-1)/S.PageSize)<S.PageNumber?Math.ceil((cn-1)/S.PageSize):S.PageNumber}))):(c.ZP.destroy(),c.ZP.error(e.data.Message))})).catch((function(n){c.ZP.destroy(),c.ZP.error(n.toString())}))}});var t}})})]})},an=n.DanhSachKhachHang,rn=n.DanhSachDMThuVien,cn=n.TotalRow,ln=(n.role,S.PageNumber?parseInt(S.PageNumber):1),on=S.PageSize?parseInt(S.PageSize):(0,v.hL)(),un=[{title:"S\u1ed1 th\u1ee9 t\u1ef1",width:"10%",align:"center",render:function(n,e,t){return(0,k.jsx)("span",{children:(ln-1)*on+(t+1)})}},{title:"T\xean kh\xe1ch h\xe0ng",dataIndex:"Ten",align:"left",width:"25%"},{title:"\u0110\u1ecba ch\u1ec9",dataIndex:"DiaChi",align:"left",width:"20%"},{title:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",dataIndex:"DienThoai",align:"left",width:"15%"},{title:"Email",dataIndex:"Email",align:"left",width:"15%"},{title:"M\xe3 c\u01a1 quan",dataIndex:"MaCQ",align:"left",width:"15%"},{title:"Tr\u1ea1ng th\xe1i",dataIndex:"IsStatus",align:"center",width:"10%",render:function(n){return!0===n?(0,k.jsx)("span",{children:"Tri\u1ec3n khai"}):!1===n?(0,k.jsx)("span",{children:"Kh\xf4ng tri\u1ec3n khai"}):(0,k.jsx)("span",{children:"Tr\u1ea1ng th\xe1i kh\xe1c"})}},{title:"Thao t\xe1c",width:"10%",align:"center",margin:"15px",render:function(n,e){return tn(e)}}];return(0,k.jsxs)(d.Z,{children:[(0,k.jsxs)(Q.Z,{children:[(0,k.jsx)(h.Z,{children:"Danh M\u1ee5c Kh\xe1ch H\xe0ng"}),(0,k.jsx)(f.Z,{children:(0,k.jsxs)(p.zx,{type:"primary",onClick:function(){K("add"),E({}),V(),R(!0)},children:[(0,k.jsx)(U.Z,{}),"Th\xeam m\u1edbi"]})})]}),(0,k.jsxs)(Z.Z,{children:[(0,k.jsx)(g.Z,{children:(0,k.jsx)(p.Vr,{defaultValue:S.Keyword,placeholder:"Nh\u1eadp t\xean kh\xe1ch h\xe0ng",style:{width:300},onSearch:function(n){return function(n,e){var t=S,a={value:n,property:e},i=(0,v.mB)(t,a,null);y(i),H([])}(n,"Keyword")},allowClear:!0})}),(0,k.jsx)(x.ZP,{columns:un,dataSource:an,onChange:function(n,e,t){var a=S,i={pagination:n,filters:e,sorter:t},r=(0,v.mB)(a,null,i);y(r),H([])},pagination:{showSizeChanger:!0,showTotal:function(n,e){return"T\u1eeb ".concat(e[0]," \u0111\u1ebfn ").concat(e[1]," tr\xean ").concat(n," k\u1ebft qu\u1ea3")},total:cn,current:ln,pageSize:on},rowKey:function(n){return n.ID}})]}),(0,k.jsx)(L,{visible:M,dataEdit:C,action:O,loading:X,onCreate:function(n,e){if($(!0),"add"===O){var t=new FormData;t.append("files",e),t.append("coQuanStr",JSON.stringify(n)),(0,m.E)(P.J.themqlthuvien,t).then((function(n){$(!1),n.data.Status>0?(c.ZP.success("Th\xeam th\xe0nh c\xf4ng"),en(),nn(o.Z.getList(S)),nn(o.Z.getGuild())):(c.ZP.destroy(),c.ZP.error(n.data.Message))})).catch((function(n){c.ZP.destroy(),c.ZP.error(n.toString())}))}if("edit"===O){var a=new FormData;a.append("updateCoQuanDonVi",JSON.stringify(n)),e.name&&a.append("files",e),(0,m.E)(P.J.suaqlthuvien,a).then((function(n){$(!1),n.data.Status>0?(c.ZP.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),en(),nn(o.Z.getList(S)),nn(o.Z.getGuild())):(c.ZP.destroy(),c.ZP.error(n.data.Message))})).catch((function(n){c.ZP.destroy(),c.ZP.error(n.toString())}))}},onCancel:en,danhSachDMThuVien:rn},G)]})}))}}]);