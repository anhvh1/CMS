"use strict";(self.webpackChunkbrvh=self.webpackChunkbrvh||[]).push([[633],{67225:function(e,n,t){var a,r=t(8491),i=t(30168),c=t(16932);t(32619),o=r.Z,(0,c.ZP)(o)(a||(a=(0,i.Z)(["\n  &.ant-switch-checked {\n    \n  }\n"])));var o},68448:function(e,n,t){t.d(n,{Z:function(){return s}});t(50390);var a,r=t(30168),i=t(16932),c=(t(32619),i.ZP.div(a||(a=(0,r.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  /* padding: 10px 0; */\n  gap: 10px;\n  width: 100%;\n"])))),o=t(62559),s=function(e){return(0,o.jsx)(c,{className:"wrapper-top",children:e.children})}},24274:function(e,n,t){t.d(n,{Z:function(){return l}});t(50390);var a,r=t(30168),i=t(16932),c=t(29665),o=i.ZP.div(a||(a=(0,r.Z)(["\n  /* margin-top: 15px;\n  margin-bottom: 15px; */\n  text-align: right;\n  /* display: inline-block; */\n  flex: 1;\n  padding: 0 3px 0 0;\n  /* margin-bottom: 10px; */\n  display: flex;\n  gap: 10px;\n  justify-content: end;\n  flex-wrap: wrap;\n  align-items: center;\n  @media only screen and (max-width: 1336px) {\n    text-align: left;\n    /* display: block; */\n    flex: none;\n    width: 100%;\n    padding: 0 0 10px 0;\n    margin-top: 5px;\n    margin-bottom: 5px;\n  }\n  /* button {\n    margin-right: 0px;\n    margin-left: 10px;\n    @media only screen and (max-width: 1336px) {\n      margin-left: 0px;\n      margin-right: 10px;\n    }\n  } */\n"]))),s=(0,c.Z)(o),u=t(62559),l=function(e){return(0,u.jsx)(s,{children:e.children})}},32812:function(e,n,t){t.d(n,{z:function(){return i}});var a=t(29439),r=t(50390);function i(e){var n=(0,r.useState)(0),t=(0,a.Z)(n,2),i=t[0],c=t[1];return[i,function(){c(i+1)}]}},65633:function(e,n,t){t.r(n),t.d(n,{default:function(){return F}});var a=t(1413),r=t(29439),i=t(891),c=t(32955),o=t(78333),s=t(54893),u=t(50390),l=t(34424),d=t(3143),h=t(7335),g=t(24274),Z=t(41367),f=t(23194),p=t(31348),x=t(21669),D=t(62187),m=(t(47471),t(67225),t(66660)),v=t(32812),y=t(64693),S=t(24055),P=t(45987),w=t(74165),I=t(15861),j=t(70785),T=t(46008),M=t(69645),b=t(86424),E=t(87796),k=t(43946),C=t.n(k),L=t(62559),N=["TrangThai"],Y=T.Z.Item,Q=T.Z.useForm,R=function(e){var n,t,i=Q(),o=(0,r.Z)(i,1)[0],s=e.dataEdit,l=(e.loading,e.visible),d=e.action,h=(e.DanhSachLoaiSuKien,e.DanhSachMediaOrPhat,(0,u.useState)([])),g=(0,r.Z)(h,2),Z=g[0],f=g[1],p=(0,u.useState)(""),D=(0,r.Z)(p,2),v=(D[0],D[1],(0,u.useState)(!1)),y=(0,r.Z)(v,2),k=(y[0],y[1],(0,m._M)("access_token")),R=(0,m.sE)(k),z=18!==(null===R||void 0===R||null===(n=R.NguoiDung)||void 0===n?void 0:n.NguoiDungID),H=(0,u.useState)([]),O=(0,r.Z)(H,2),A=O[0],F=O[1],U=(0,u.useState)(""),_=(0,r.Z)(U,2),K=(_[0],_[1]);(0,u.useEffect)((function(){s&&s.LicenseID&&o&&o.setFieldsValue((0,a.Z)((0,a.Z)({},s),{},{StartDate:s&&s.NgayDangKy?C()(s.NgayDangKy,"DD/MM/YYYY"):"",EndDate:s&&s.NgayHetHan?C()(s.NgayHetHan,"DD/MM/YYYY"):"",DisplayName:s&&s.TenManHinh}))}),[]),(0,u.useEffect)((function(){V()}),[]);var V=function(){var e=(0,I.Z)((0,w.Z)().mark((function e(){var n;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.Z.danhSachManHinhOrNhomManHinh({coQuanID:o.getFieldValue("CoQuanID")});case 3:(n=e.sent).data.Status>0?F(n.data.Data):(c.ZP.destroy(),c.ZP.warning(n.data.Message)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c.ZP.destroy(),c.ZP.error("An error occurred while fetching data");case 11:return e.prev=11,e.finish(11);case 13:case"end":return e.stop()}}),e,null,[[0,7,11,13]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,I.Z)((0,w.Z)().mark((function e(){var n;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.Z.CreateLicense({DisplayID:o.getFieldValue("DisplayID"),StartDate:o.getFieldValue("StartDate"),EndDate:o.getFieldValue("EndDate")});case 3:(n=e.sent).data.Status>0?(K(n.data.Data),o.setFieldsValue({LicenseInfo:n.data.Data})):(c.ZP.destroy(),c.ZP.warning(n.data.Message)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c.ZP.destroy(),c.ZP.error("An error occurred while fetching data");case 11:return e.prev=11,e.finish(11);case 13:case"end":return e.stop()}}),e,null,[[0,7,11,13]])})));return function(){return e.apply(this,arguments)}}(),q=(0,m._M)("access_token"),G=(0,m.sE)(q);null===G||void 0===G||null===(t=G.NguoiDung)||void 0===t||t.CoQuanID;(0,u.useEffect)((function(){X()}),[]);var X=function(){var e=(0,I.Z)((0,w.Z)().mark((function e(){var n;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.Z.DanhSachNguoiDung();case 3:(n=e.sent).data.Status>0&&f(n.data.Data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("L\u1ed7i khi l\u1ea5y danh s\xe1ch c\u1ea5p x\u1ebfp h\u1ea1ng:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),$=(0,u.useState)([]),J=(0,r.Z)($,2),W=(J[0],J[1]),ee=(0,u.useState)(null),ne=(0,r.Z)(ee,2),te=ne[0];ne[1];(0,u.useEffect)((function(){ae(te)}),[te]);var ae=function(){var e=(0,I.Z)((0,w.Z)().mark((function e(n){var t;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,S.Z.danhSachMediaorPhat({title:n,coQuanID:o.getFieldValue("CoQuanID")});case 5:(t=e.sent).data.Status>0?W(t.data.Data):(c.ZP.destroy(),c.ZP.warning(t.data.Message)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),c.ZP.destroy(),c.ZP.error("An error occurred while fetching data");case 13:return e.prev=13,e.finish(13);case 15:case"end":return e.stop()}}),e,null,[[2,9,13,15]])})));return function(n){return e.apply(this,arguments)}}();return(0,L.jsx)(x.u_,{title:"".concat("edit"===d?"S\u1eeda":"Th\xeam m\u1edbi"," License"),width:750,visible:l,onCancel:e.onCancel,footer:[(0,L.jsx)(x.zx,{onClick:e.onCancel,children:"H\u1ee7y"},"back"),(0,L.jsx)(x.zx,{htmlType:"submit",type:"primary",form:"formDiSanTuLieu",onClick:function(n){n.preventDefault(),o.validateFields().then((function(n){var t=n.StartDate,r=n.EndDate;if(t&&r&&t.isAfter(r))c.ZP.error("Ng\xe0y b\u1eaft \u0111\u1ea7u kh\xf4ng \u0111\u01b0\u1ee3c l\u1edbn h\u01a1n ng\xe0y k\u1ebft th\xfac");else{var i=n.TrangThai,o=(0,P.Z)(n,N),s=(0,a.Z)((0,a.Z)({},o),{},{Status:i});console.log(t,r,s.StartDate,s.EndDate),s.StartDate=t?C()(t).format("YYYY-MM-DD"):null,s.EndDate=r?C()(r).format("YYYY-MM-DD"):null,(0,e.onCreate)(s)}}))},children:"L\u01b0u"},"submit")],children:(0,L.jsxs)(T.Z,{form:o,name:"formDiSanTuLieu",children:["add"!==d?(0,L.jsx)(Y,(0,a.Z)({name:"LicenseID",hidden:!0},j.REQUIRED)):null,"add"!==d?(0,L.jsx)(Y,(0,a.Z)({name:"DisplayID",hidden:!0},j.REQUIRED)):null,!z&&(0,L.jsx)(Y,(0,a.Z)((0,a.Z)({label:"Ch\u1ecdn kh\xe1ch h\xe0ng",name:"add"!==d?"TenCoQuan":"CoQuanID"},j.ITEM_LAYOUT),{},{rules:[j.REQUIRED],children:(0,L.jsx)(M.Z,{allowClear:!0,disabled:"add"!==d,onChange:function(e){o.setFieldsValue({MediaORDanhSachPhat:void 0}),o.setFieldsValue({DisplayID:void 0}),ae(te),V()},children:null===Z||void 0===Z?void 0:Z.map((function(e){return(0,L.jsx)(Option,{value:e.ID,children:e.Ten})}))})})),(0,L.jsx)(Y,(0,a.Z)((0,a.Z)({label:"M\xe0n h\xecnh/Nh\xf3m m\xe0n h\xecnh ",name:"add"!==d?"DisplayName":"DisplayID"},j.ITEM_LAYOUT),{},{rules:[j.REQUIRED],children:(0,L.jsx)(M.Z,{disabled:"add"!==d,allowClear:!0,children:null===A||void 0===A?void 0:A.map((function(e){return(0,L.jsx)(Option,{value:e.ID,children:e.Ten})}))})})),(0,L.jsx)(Y,(0,a.Z)((0,a.Z)({label:"Ng\xe0y b\u1eaft \u0111\u1ea7u",name:"StartDate"},j.ITEM_LAYOUT),{},{rules:[j.REQUIRED],children:(0,L.jsx)(b.C,{format:"DD/MM/YYYY"})})),(0,L.jsx)(Y,(0,a.Z)((0,a.Z)({label:"Ng\xe0y k\u1ebft th\xfac",name:"EndDate"},j.ITEM_LAYOUT),{},{rules:[j.REQUIRED],children:(0,L.jsx)(b.C,{format:"DD/MM/YYYY"})})),(0,L.jsx)("div",{style:{textAlign:"right",marginBottom:"20px"},children:(0,L.jsx)(x.zx,{onClick:B,children:"T\u1ea1o lisence"})}),(0,L.jsx)(Y,(0,a.Z)((0,a.Z)({label:"LicenseInfo",name:"LicenseInfo"},j.ITEM_LAYOUT),{},{children:(0,L.jsx)(E.Z,{rows:4})})),(0,L.jsx)(Y,(0,a.Z)((0,a.Z)({label:"Tr\u1ea1ng th\xe1i",name:"TrangThai"},j.ITEM_LAYOUT),{},{rules:[j.REQUIRED],children:(0,L.jsxs)(M.Z,{children:[(0,L.jsx)(Option,{value:!0,children:"Ho\u1ea1t \u0111\u1ed9ng"}),(0,L.jsx)(Option,{value:!1,children:"Kh\xf4ng ho\u1ea1t"})]})}))]})})},z=t(81299),H=t(86460),O=t(79588),A=(t(60606),t(68448));var F=(0,l.$j)((function(e){return(0,a.Z)((0,a.Z)({},e.QLLicense),{},{role:(0,m.Ry)(e.Auth.role,"danh-muc-license")})}),s.Z)((function(e){var n,t=(0,u.useState)(y.parse(e.location.search)),s=(0,r.Z)(t,2),P=s[0],w=s[1],I=(0,u.useState)({}),j=(0,r.Z)(I,2),T=j[0],M=j[1],b=(0,u.useState)(!1),E=(0,r.Z)(b,2),k=E[0],C=E[1],N=(0,u.useState)(""),Y=(0,r.Z)(N,2),Q=Y[0],F=Y[1];console.log("action",Q);var U=(0,l.v9)((function(e){return e.DMCoQuan})).DanhSachCoQuan,_=(0,v.z)(),K=(0,r.Z)(_,2),V=K[0],B=K[1],q=(0,u.useState)([]),G=(0,r.Z)(q,2),X=(G[0],G[1]),$=(0,u.useState)(!1),J=(0,r.Z)($,2),W=J[0],ee=J[1],ne=(0,l.I0)();document.title="Qu\u1ea3n l\xfd License",(0,u.useEffect)((function(){(0,m.ZZ)(P),e.getList(P)}),[P]),(0,u.useEffect)((function(){ne(D.Z.getInitData())}),[]);var te=function(e,n){var t=P,a={value:e,property:n},r=(0,m.mB)(t,a,null);w(r),X([])},ae=function(){X([]),M({}),C(!1)},re=function(n){return(0,L.jsxs)("div",{className:"action-btn",children:[(0,L.jsx)(o.Z,{title:"S\u1eeda",children:(0,L.jsx)(z.Z,{onClick:function(){return e=n.LicenseID,F("edit"),void S.Z.chiTietLicence({licenseID:e}).then((function(e){e.data.Status>0?(M(e.data.Data),B(),C(!0)):(c.ZP.destroy(),c.ZP.error(e.data.Message))})).catch((function(e){c.ZP.destroy(),c.ZP.error(e.toString())}));var e}})}),(0,L.jsx)(o.Z,{title:"X\xf3a",children:(0,L.jsx)(H.Z,{onClick:function(){return t=n.LicenseID,void i.Z.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a ch\u1ee9c v\u1ee5 n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:function(){ee(!0),S.Z.xoaLicence(t,{}).then((function(n){n.data.Status>0?(ee(!1),e.getList((0,a.Z)((0,a.Z)({},P),{},{PageNumber:Math.ceil((ce-1)/P.PageSize)<P.PageNumber?Math.ceil((ce-1)/P.PageSize):P.PageNumber})),c.ZP.destroy(),c.ZP.success(n.data.Message),w((0,a.Z)((0,a.Z)({},P),{},{PageNumber:Math.ceil((ce-1)/P.PageSize)<P.PageNumber?Math.ceil((ce-1)/P.PageSize):P.PageNumber}))):(c.ZP.destroy(),c.ZP.error(n.data.Message))})).catch((function(e){c.ZP.destroy(),c.ZP.error(e.toString())}))}});var t}})})]})},ie=e.DanhSachLicense,ce=e.TotalRow,oe=(e.role,P.PageNumber?parseInt(P.PageNumber):1),se=P.PageSize?parseInt(P.PageSize):(0,m.hL)(),ue=[{title:"STT",width:"5%",align:"center",render:function(e,n,t){return(0,L.jsx)("span",{children:(oe-1)*se+(t+1)})}},{title:"T\xean kh\xe1ch h\xe0ng",dataIndex:"TenCoQuan",align:"center",width:"10%"},{title:"T\xean m\xe0n h\xecnh",dataIndex:"TenManHinh",align:"center",width:"10%"},{title:"LicenseInfo",dataIndex:"LicenseInfo",align:"center",width:"30%"},{title:"Gi\u1edd b\u1eaft \u0111\u1ea7u",dataIndex:"NgayDangKy",align:"center",width:"10%"},{title:"Gi\u1edd k\u1ebft th\xfac",dataIndex:"NgayHetHan",align:"center",width:"10%"},{title:"Tr\u1ea1ng th\xe1i",dataIndex:"TrangThai",align:"center",width:"10%",render:function(e){return e?"Ho\u1ea1t \u0111\u1ed9ng":"Kh\xf4ng ho\u1ea1t \u0111\u1ed9ng"}},{title:"Thao t\xe1c",width:"15%",align:"center",render:function(e,n){return re(n)}}],le=(0,m._M)("access_token"),de=(0,m.sE)(le),he=18!==(null===de||void 0===de||null===(n=de.NguoiDung)||void 0===n?void 0:n.NguoiDungID);return(0,L.jsxs)(d.Z,{children:[(0,L.jsxs)(A.Z,{children:[(0,L.jsx)(h.Z,{children:"Qu\u1ea3n l\xfd License"}),(0,L.jsx)(g.Z,{children:(0,L.jsxs)(x.zx,{type:"primary",onClick:function(){F("add"),M({}),B(),C(!0)},children:[(0,L.jsx)(O.Z,{}),"Th\xeam m\u1edbi"]})})]}),(0,L.jsxs)(Z.Z,{children:[(0,L.jsxs)(f.Z,{children:[!he&&(0,L.jsx)(x.mP,{showSearch:!0,treeData:U,onChange:function(e){return te(e,"CoQuanID")},style:{width:400},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Ch\u1ecdn c\u01a1 quan",allowClear:!0,treeDefaultExpandAll:!0,notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",treeNodeFilterProp:"title"}),(0,L.jsx)(x.Vr,{defaultValue:P.Keyword,placeholder:"Nh\u1eadp t\xean kh\xe1ch h\xe0ng ho\u1eb7c t\xean m\xe0n h\xecnh",style:{width:300},onSearch:function(e){return te(e,"Keyword")},allowClear:!0})]}),(0,L.jsx)(p.ZP,{columns:ue,dataSource:ie,onChange:function(e,n,t){var a=P,r={pagination:e,filters:n,sorter:t},i=(0,m.mB)(a,null,r);w(i),X([])},pagination:{showSizeChanger:!0,showTotal:function(e,n){return"T\u1eeb ".concat(n[0]," \u0111\u1ebfn ").concat(n[1]," tr\xean ").concat(e," k\u1ebft qu\u1ea3")},total:ce,current:oe,pageSize:se},rowKey:function(e){return e.ID}})]}),(0,L.jsx)(R,{visible:k,dataEdit:T,action:Q,loading:W,onCreate:function(n){console.log(n),ee(!0),"add"===Q&&S.Z.themLicence(n).then((function(n){ee(!1),n.data.Status>0?(c.ZP.destroy(),c.ZP.success(n.data.Message),ae(),e.getList(P)):(ee(!1),c.ZP.destroy(),c.ZP.error(n.data.Message))})).catch((function(e){ee(!1),c.ZP.destroy(),c.ZP.error(e.toString())})),"edit"===Q&&S.Z.suaLicence(n).then((function(n){n.data.Status>0?(ee(!1),c.ZP.destroy(),c.ZP.success(n.data.Message),ae(),e.getList(P)):(ee(!1),c.ZP.destroy(),c.ZP.error(n.data.Message))})).catch((function(e){ee(!1),c.ZP.destroy(),c.ZP.error(e.toString())}))},onCancel:ae},V)]})}))}}]);