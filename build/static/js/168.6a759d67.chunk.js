"use strict";(self.webpackChunkbrvh=self.webpackChunkbrvh||[]).push([[168],{67225:function(n,e,t){var a,i=t(8491),r=t(30168),h=t(16932);t(32619),u=i.Z,(0,h.ZP)(u)(a||(a=(0,r.Z)(["\n  &.ant-switch-checked {\n    \n  }\n"])));var u},68448:function(n,e,t){t.d(e,{Z:function(){return l}});t(50390);var a,i=t(30168),r=t(16932),h=(t(32619),r.ZP.div(a||(a=(0,i.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  /* padding: 10px 0; */\n  gap: 10px;\n  width: 100%;\n"])))),u=t(62559),l=function(n){return(0,u.jsx)(h,{className:"wrapper-top",children:n.children})}},24274:function(n,e,t){t.d(e,{Z:function(){return c}});t(50390);var a,i=t(30168),r=t(16932),h=t(29665),u=r.ZP.div(a||(a=(0,i.Z)(["\n  /* margin-top: 15px;\n  margin-bottom: 15px; */\n  text-align: right;\n  /* display: inline-block; */\n  flex: 1;\n  padding: 0 3px 0 0;\n  /* margin-bottom: 10px; */\n  display: flex;\n  gap: 10px;\n  justify-content: end;\n  flex-wrap: wrap;\n  align-items: center;\n  @media only screen and (max-width: 1336px) {\n    text-align: left;\n    /* display: block; */\n    flex: none;\n    width: 100%;\n    padding: 0 0 10px 0;\n    margin-top: 5px;\n    margin-bottom: 5px;\n  }\n  /* button {\n    margin-right: 0px;\n    margin-left: 10px;\n    @media only screen and (max-width: 1336px) {\n      margin-left: 0px;\n      margin-right: 10px;\n    }\n  } */\n"]))),l=(0,h.Z)(u),o=t(62559),c=function(n){return(0,o.jsx)(l,{children:n.children})}},32812:function(n,e,t){t.d(e,{z:function(){return r}});var a=t(29439),i=t(50390);function r(n){var e=(0,i.useState)(0),t=(0,a.Z)(e,2),r=t[0],h=t[1];return[r,function(){h(r+1)}]}},98168:function(n,e,t){t.r(e),t.d(e,{default:function(){return R}});var a=t(1413),i=t(29439),r=t(5718),h=t(97612),u=t(78333),l=t(53291),o=t(50390),c=t(34424),s=t(3143),d=t(7335),f=t(24274),g=t(41367),m=t(23194),p=t(31348),x=t(19877),Z=t(62187),D=(t(47471),t(67225),t(66660)),v=t(32812),M=t(64693),T=t(98345),S=(t(60606),t(74165)),j=t(15861),I=t(70785),y=t(46008),N=t(69645),P=t(26854),w=(t(86424),t(43946)),L=t.n(w),Y=t(62559),H=y.Z.Item,C=y.Z.useForm,b=function(n){var e,t,r=C(),h=(0,i.Z)(r,1)[0],u=n.dataEdit,l=(n.loading,n.visible),c=n.action,s=n.DanhSachLoaiSuKien,d=(n.DanhSachMediaOrPhat,n.DanhSachManHinhOrNhomManHinh),f=(0,o.useState)([]),g=(0,i.Z)(f,2),m=g[0],p=g[1],Z=(0,o.useState)(""),v=(0,i.Z)(Z,2),M=(v[0],v[1],(0,o.useState)(!1)),w=(0,i.Z)(M,2),b=w[0],E=w[1],O=(0,D._M)("access_token"),k=(0,D.sE)(O),K=18!==(null===k||void 0===k||null===(e=k.NguoiDung)||void 0===e?void 0:e.NguoiDungID);(0,o.useEffect)((function(){if(u&&u.LichPhatID){var n=u.LoaiSuKien,e=L()(u.NgayKetThuc).format("DD/MM/YYYY HH:mm:ss"),t=L()(u.NgayBatDau).format("DD/MM/YYYY HH:mm:ss");G(n);var i=u.ListManHinhOrNhomManHinh;h&&h.setFieldsValue((0,a.Z)((0,a.Z)({},u),{},{NgayKetThuc:u&&u.NgayKetThuc?L()(e,"DD/MM/YYYY HH:mm:ss "):"",NgayBatDau:u&&u.NgayBatDau?L()(t,"DD/MM/YYYY HH:mm:ss "):"",ListManHinhOrNhomManHinh:i.map((function(n){return n.ID}))})),E(u.ChiaNgay)}}),[]);var R=(0,D._M)("access_token"),Q=(0,D.sE)(R),U=null===Q||void 0===Q||null===(t=Q.NguoiDung)||void 0===t?void 0:t.CoQuanID;(0,o.useEffect)((function(){_()}),[]);var _=function(){var n=(0,j.Z)((0,S.Z)().mark((function n(){var e;return(0,S.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T.Z.DanhSachNguoiDung();case 3:(e=n.sent).data.Status>0&&p(e.data.Data),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error("L\u1ed7i khi l\u1ea5y danh s\xe1ch c\u1ea5p x\u1ebfp h\u1ea1ng:",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}(),z=function(){var e=(0,j.Z)((0,S.Z)().mark((function e(t){var i,r,u,l,o;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,h.validateFields();case 4:r=e.sent,u=null===(i=r.ListManHinhOrNhomManHinh)||void 0===i?void 0:i.map((function(n){var e=d.find((function(e){return e.ID===n}));return{ID:e.ID,Ten:e.Ten,Title:e.Title}})),l=F.find((function(n){return n.ID===r.MediaORDanhSachPhat})),o=(0,a.Z)((0,a.Z)({},r),{},{CoQuanID:U,ListManHinhOrNhomManHinh:u,TitleMediaORDanhSachPhat:null===l||void 0===l?void 0:l.Title}),b&&(o.NgayBatDau=r.NgayBatDau&&r.NgayBatDau.format("YYYY-MM-DDTHH:mm:ss.SSS"),o.NgayKetThuc=r.NgayKetThuc&&r.NgayKetThuc.format("YYYY-MM-DDTHH:mm:ss.SSS")),n.onCreate(o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("Validation failed:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(n){return e.apply(this,arguments)}}(),B=(0,o.useState)([]),A=(0,i.Z)(B,2),F=A[0],V=A[1],q=(0,o.useState)(null),X=(0,i.Z)(q,2),$=X[0],G=X[1];(0,o.useEffect)((function(){J($)}),[$]);var J=function(){var n=(0,j.Z)((0,S.Z)().mark((function n(e){var t;return(0,S.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,T.Z.danhSachMediaorPhat({title:e});case 5:(t=n.sent).data.Status>0?V(t.data.Data):(message.destroy(),message.warning(t.data.Message)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(2),message.destroy(),message.error("An error occurred while fetching data");case 13:return n.prev=13,n.finish(13);case 15:case"end":return n.stop()}}),n,null,[[2,9,13,15]])})));return function(e){return n.apply(this,arguments)}}();return(0,Y.jsx)(x.u_,{title:"".concat("edit"===c?"S\u1eeda":"Th\xeam m\u1edbi"," l\u1ecbch ph\xe1t"),width:750,visible:l,onCancel:n.onCancel,footer:[(0,Y.jsx)(x.zx,{onClick:n.onCancel,children:"H\u1ee7y"},"back"),(0,Y.jsx)(x.zx,{htmlType:"submit",type:"primary",form:"formDiSanTuLieu",onClick:z,children:"L\u01b0u"},"submit")],children:(0,Y.jsxs)(y.Z,{form:h,name:"formDiSanTuLieu",children:["add"!==c?(0,Y.jsx)(H,(0,a.Z)({name:"LichPhatID",hidden:!0},I.REQUIRED)):null,(0,Y.jsx)(H,(0,a.Z)({name:"CoQuanID",hidden:!0},I.REQUIRED)),!K&&(0,Y.jsx)(H,(0,a.Z)((0,a.Z)({label:"Ch\u1ecdn kh\xe1ch h\xe0ng",name:"NguoiDungID"},I.ITEM_LAYOUT),{},{rules:[I.REQUIRED],children:(0,Y.jsx)(N.Z,{allowClear:!0,children:null===m||void 0===m?void 0:m.map((function(n){return(0,Y.jsx)(Option,{value:n.ID,children:n.Ten})}))})})),(0,Y.jsx)(H,(0,a.Z)((0,a.Z)({label:"T\xean danh s\xe1ch ph\xe1t",name:"TenLichPhat"},I.ITEM_LAYOUT),{},{children:(0,Y.jsx)(x.II,{})})),(0,Y.jsx)(H,(0,a.Z)((0,a.Z)({label:"Lo\u1ea1i th\u01b0 vi\u1ec7n",name:"LoaiSuKien"},I.ITEM_LAYOUT),{},{rules:[I.REQUIRED],children:(0,Y.jsx)(N.Z,{allowClear:!0,onChange:function(n){return G(n)},children:null===s||void 0===s?void 0:s.map((function(n){return(0,Y.jsx)(Option,{value:n.ID,children:n.TenSuKien})}))})})),(0,Y.jsx)(H,(0,a.Z)((0,a.Z)({label:"Media/Danh s\xe1ch ph\xe1t",name:"MediaORDanhSachPhat"},I.ITEM_LAYOUT),{},{rules:[I.REQUIRED],children:(0,Y.jsx)(N.Z,{allowClear:!0,children:null===F||void 0===F?void 0:F.map((function(n){return(0,Y.jsx)(Option,{value:n.ID,children:n.Ten})}))})})),(0,Y.jsx)(H,(0,a.Z)((0,a.Z)({label:"M\xe0n h\xecnh/Nh\xf3m m\xe0n h\xecnh ",name:"ListManHinhOrNhomManHinh"},I.ITEM_LAYOUT),{},{rules:[I.REQUIRED],children:(0,Y.jsx)(N.Z,{mode:"multiple",allowClear:!0,children:null===d||void 0===d?void 0:d.map((function(n){return(0,Y.jsx)(Option,{value:n.ID,children:n.Ten})}))})})),(0,Y.jsx)(H,(0,a.Z)((0,a.Z)({label:"Chia ng\xe0y",name:"ChiaNgay"},I.ITEM_LAYOUT),{},{rules:[I.REQUIRED],children:(0,Y.jsxs)(N.Z,{onChange:function(n){return E(n)},children:[(0,Y.jsx)(Option,{value:!0,children:"T\xf9y ch\u1ec9nh"}),(0,Y.jsx)(Option,{value:!1,children:"Lu\xf4n Lu\xf4n"})]})})),b&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(H,(0,a.Z)((0,a.Z)({label:"B\u1eaft \u0111\u1ea7u",name:"NgayBatDau"},I.ITEM_LAYOUT),{},{rules:[I.REQUIRED],children:(0,Y.jsx)(P.Z,{format:"DD/MM/YYYY HH:mm:ss",showTime:!0,placeholder:"",style:{width:"100%"}})})),(0,Y.jsx)(H,(0,a.Z)((0,a.Z)({label:"K\u1ebft th\xfac",name:"NgayKetThuc"},I.ITEM_LAYOUT),{},{rules:[I.REQUIRED],children:(0,Y.jsx)(P.Z,{format:"DD/MM/YYYY HH:mm:ss",showTime:!0,placeholder:"",style:{width:"100%"}})}))]}),(0,Y.jsx)(H,(0,a.Z)((0,a.Z)({label:"Tr\u1ea1ng th\xe1i",name:"TrangThai"},I.ITEM_LAYOUT),{},{rules:[I.REQUIRED],children:(0,Y.jsxs)(N.Z,{children:[(0,Y.jsx)(Option,{value:!0,children:"Ho\u1ea1t \u0111\u1ed9ng"}),(0,Y.jsx)(Option,{value:!1,children:"Kh\xf4ng ho\u1ea1t"})]})}))]})})},E=t(81299),O=t(86460),k=t(79588),K=t(68448);var R=(0,c.$j)((function(n){return(0,a.Z)((0,a.Z)({},n.QLNgheNhan),{},{role:(0,D.Ry)(n.Auth.role,"danh-muc-chuc-vu")})}),l.Z)((function(n){var e,t=(0,o.useState)(M.parse(n.location.search)),S=(0,i.Z)(t,2),j=S[0],I=S[1],y=(0,o.useState)({}),N=(0,i.Z)(y,2),P=N[0],w=N[1],H=(0,o.useState)(!1),C=(0,i.Z)(H,2),R=C[0],Q=C[1],U=(0,o.useState)(""),_=(0,i.Z)(U,2),z=_[0],B=_[1],A=(0,c.v9)((function(n){return n.DMCoQuan})).DanhSachCoQuan,F=(0,v.z)(),V=(0,i.Z)(F,2),q=V[0],X=V[1],$=(0,o.useState)([]),G=(0,i.Z)($,2),J=(G[0],G[1]),W=(0,o.useState)(!1),nn=(0,i.Z)(W,2),en=nn[0],tn=nn[1],an=(0,c.I0)();document.title="Qu\u1ea3n l\xfd l\u1ecbch ph\xe1t",(0,o.useEffect)((function(){(0,D.ZZ)(j),n.getList(j)}),[j]),(0,o.useEffect)((function(){n.getList(j),an(l.Z.getInitData(j)),an(Z.Z.getInitData())}),[]);var rn=function(n,e){var t=j,a={value:n,property:e},i=(0,D.mB)(t,a,null);I(i),J([])},hn=function(){J([]),w({}),Q(!1)},un=function(e){return(0,Y.jsxs)("div",{className:"action-btn",children:[(0,Y.jsx)(u.Z,{title:"S\u1eeda",children:(0,Y.jsx)(E.Z,{onClick:function(){return function(n){var e=n;B("edit"),T.Z.chiTietNgheNhan({LichPhatID:e}).then((function(n){n.data.Status>0?(w(n.data.Data),X(),Q(!0)):(h.ZP.destroy(),h.ZP.error(n.data.Message))})).catch((function(n){h.ZP.destroy(),h.ZP.error(n.toString())}))}(e.LichPhatID)}})}),(0,Y.jsx)(u.Z,{title:"X\xf3a",children:(0,Y.jsx)(O.Z,{onClick:function(){return t=e.LichPhatID,void r.Z.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a ch\u1ee9c v\u1ee5 n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:function(){tn(!0),T.Z.xoaNgheNhan(t,{}).then((function(e){e.data.Status>0?(tn(!1),n.getList((0,a.Z)((0,a.Z)({},j),{},{PageNumber:Math.ceil((dn-1)/j.PageSize)<j.PageNumber?Math.ceil((dn-1)/j.PageSize):j.PageNumber})),h.ZP.destroy(),h.ZP.success(e.data.Message),I((0,a.Z)((0,a.Z)({},j),{},{PageNumber:Math.ceil((dn-1)/j.PageSize)<j.PageNumber?Math.ceil((dn-1)/j.PageSize):j.PageNumber}))):(h.ZP.destroy(),h.ZP.error(e.data.Message))})).catch((function(n){h.ZP.destroy(),h.ZP.error(n.toString())}))}});var t}})})]})},ln=n.DanhSachNgheNhan,on=n.DanhSachLoaiSuKien,cn=n.DanhSachMediaOrPhat,sn=n.DanhSachManHinhOrNhomManHinh,dn=n.TotalRow,fn=(n.role,j.PageNumber?parseInt(j.PageNumber):1),gn=j.PageSize?parseInt(j.PageSize):(0,D.hL)(),mn=[{title:"STT",width:"5%",align:"center",render:function(n,e,t){return(0,Y.jsx)("span",{children:(fn-1)*gn+(t+1)})}},{title:"T\xean l\u1ecbch ph\xe1t",dataIndex:"TenLichPhat",align:"center",width:"20%"},{title:"Lo\u1ea1i s\u1ef1 ki\u1ec7n",dataIndex:"TenSuKien",align:"center",width:"15%"},{title:"Media/Danh s\xe1ch ph\xe1t",dataIndex:"TenMediaORDanhSachPhat",align:"center",width:"20%"},{title:"M\xe0n h\xecnh/Nh\xf3m",dataIndex:"ListManHinhOrNhomManHinh",align:"center",width:"20%",render:function(n,e){return e.ListManHinhOrNhomManHinh&&e.ListManHinhOrNhomManHinh.length>0?e.ListManHinhOrNhomManHinh.filter((function(n){return null!==n.Ten})).map((function(n){return n.Ten})).join(", "):""}},{title:"B\u1eaft \u0111\u1ea7u",dataIndex:"NgayBatDau",align:"center",width:"10%",render:function(n,e){return!1===e.ChiaNgay?(0,Y.jsx)("span",{children:"Lu\xf4n Lu\xf4n"}):(0,Y.jsxs)(Y.Fragment,{children:[L()(n).format("DD-MM-YYYY"),(0,Y.jsx)("br",{}),L()(n).format("HH:mm:ss")]})}},{title:"K\u1ebft th\xfac",dataIndex:"NgayKetThuc",align:"center",width:"10%",render:function(n,e){return!1===e.ChiaNgay?null:(0,Y.jsxs)(Y.Fragment,{children:[L()(n).format("DD-MM-YYYY"),(0,Y.jsx)("br",{}),L()(n).format("HH:mm:ss")]})}},{title:"Tr\u1ea1ng th\xe1i",dataIndex:"TrangThai",align:"center",width:"15%",render:function(n){return!0===n?(0,Y.jsx)("span",{children:"Ho\u1ea1t \u0111\u1ed9ng"}):!1===n?(0,Y.jsx)("span",{children:"Kh\xf4ng ho\u1ea1t \u0111\u1ed9ng"}):(0,Y.jsx)("span",{children:"Tr\u1ea1ng th\xe1i kh\xe1c"})}},{title:"Kh\xe1ch h\xe0ng",dataIndex:"TenCoQuan",align:"center",width:"20%"},{title:"Thao t\xe1c",width:"10%",align:"center",margin:"10px",render:function(n,e){return un(e)}}],pn=(0,D._M)("access_token"),xn=(0,D.sE)(pn),Zn=18!==(null===xn||void 0===xn||null===(e=xn.NguoiDung)||void 0===e?void 0:e.NguoiDungID);return(0,Y.jsxs)(s.Z,{children:[(0,Y.jsxs)(K.Z,{children:[(0,Y.jsx)(d.Z,{children:"Qu\u1ea3n l\xfd l\u1ecbch ph\xe1t"}),(0,Y.jsx)(f.Z,{children:(0,Y.jsxs)(x.zx,{type:"primary",onClick:function(){B("add"),w({}),X(),Q(!0)},children:[(0,Y.jsx)(k.Z,{}),"Th\xeam m\u1edbi"]})})]}),(0,Y.jsxs)(g.Z,{children:[(0,Y.jsxs)(m.Z,{children:[!Zn&&(0,Y.jsx)(x.mP,{showSearch:!0,treeData:A,onChange:function(n){return rn(n,"CoQuanID")},style:{width:400},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Ch\u1ecdn c\u01a1 quan",allowClear:!0,treeDefaultExpandAll:!0,notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",treeNodeFilterProp:"title"}),(0,Y.jsx)(x.Ph,{allowClear:!0,style:{width:"200px"},defaultValue:j.LoaiSuKien,placeholder:"Lo\u1ea1i s\u01b0 ki\u1ec7n",onChange:function(n){return rn(n,"LoaiSuKien")},children:null===on||void 0===on?void 0:on.map((function(n){return(0,Y.jsx)(Option,{value:n.ID,children:n.TenSuKien})}))}),(0,Y.jsx)(x.Ph,{allowClear:!0,style:{width:"200px"},defaultValue:j.ID,placeholder:"M\xe0n h\xecnh",onChange:function(n,e){rn(n,"ID");var t=sn.find((function(e){return e.ID===n}));t&&t.ID===n?rn(1,"title"):rn(null,"title")},children:sn.filter((function(n){return 1===n.Title})).map((function(n){return(0,Y.jsx)(Option,{value:n.ID,children:n.Ten},n.Title)}))}),(0,Y.jsx)(x.Ph,{allowClear:!0,style:{width:"200px"},defaultValue:j.title,placeholder:"Nh\xf3m m\xe0n h\xecnh",onChange:function(n,e){rn(n,"ID");var t=sn.find((function(e){return e.ID===n}));t&&t.ID===n?rn(2,"title"):rn(null,"title")},children:sn.filter((function(n){return 2===n.Title})).map((function(n){return(0,Y.jsx)(Option,{value:n.ID,children:n.Ten},n.ID)}))}),(0,Y.jsx)(x.Vr,{defaultValue:j.Keyword,placeholder:"Nh\u1eadp t\xean s\u1ef1 ki\u1ec7n",style:{width:300},onSearch:function(n){return rn(n,"Keyword")},allowClear:!0})]}),(0,Y.jsx)(p.ZP,{columns:mn,dataSource:ln,onChange:function(n,e,t){var a=j,i={pagination:n,filters:e,sorter:t},r=(0,D.mB)(a,null,i);I(r),J([])},pagination:{showSizeChanger:!0,showTotal:function(n,e){return"T\u1eeb ".concat(e[0]," \u0111\u1ebfn ").concat(e[1]," tr\xean ").concat(n," k\u1ebft qu\u1ea3")},total:dn,current:fn,pageSize:gn},rowKey:function(n){return n.ID}})]}),(0,Y.jsx)(b,{visible:R,dataEdit:P,action:z,loading:en,onCreate:function(e){tn(!0),"add"===z&&T.Z.themNgheNhan(e).then((function(e){tn(!1),e.data.Status>0?(h.ZP.destroy(),h.ZP.success(e.data.Message),hn(),n.getList(j)):(tn(!1),h.ZP.destroy(),h.ZP.error(e.data.Message))})).catch((function(n){tn(!1),h.ZP.destroy(),h.ZP.error(n.toString())})),"edit"===z&&T.Z.suaNgheNhan(e).then((function(e){e.data.Status>0?(tn(!1),h.ZP.destroy(),h.ZP.success(e.data.Message),hn(),n.getList(j)):(tn(!1),h.ZP.destroy(),h.ZP.error(e.data.Message))})).catch((function(n){tn(!1),h.ZP.destroy(),h.ZP.error(n.toString())}))},onCancel:hn,DanhSachLoaiSuKien:on,DanhSachMediaOrPhat:cn,DanhSachManHinhOrNhomManHinh:sn},q)]})}))}}]);